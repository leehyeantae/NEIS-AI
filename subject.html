<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ê³¼ëª©ë³„ ì„¸ë¶€ëŠ¥ë ¥ ë° íŠ¹ì´ì‚¬í•­</title>
    <style>
      /* [ë””ìì¸ í†µì¼] ê³µí†µ ìŠ¤íƒ€ì¼ */
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", -apple-system, sans-serif;
        background: #f5f6f8;
        color: #333;
        overflow: hidden;
      }

      .topbar {
        height: 48px;
        background: #f5c6cf;
        display: flex;
        align-items: center;
        padding: 0 16px;
        font-weight: 700;
        border-bottom: 1px solid #e5adba;
        color: #333;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        height: calc(100vh - 48px);
      }
      .left,
      .right {
        padding: 25px;
        background: #fff;
        overflow-y: auto;
      }
      .left {
        border-right: 1px solid #e5e7eb;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      .right {
        display: flex;
        flex-direction: column;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      .section-title {
        font-size: 16px;
        font-weight: 700;
        color: #1f2937;
      }

      /* ì…ë ¥ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
      .label {
        font-size: 13px;
        font-weight: 600;
        color: #4b5563;
        margin-bottom: 6px;
        display: block;
      }
      .input,
      .textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        font-size: 14px;
        transition: border 0.2s;
      }
      .input:focus,
      .textarea:focus {
        outline: none;
        border-color: #1f4ddc;
        box-shadow: 0 0 0 3px rgba(31, 77, 220, 0.1);
      }
      .textarea {
        min-height: 120px;
        line-height: 1.6;
        resize: vertical;
      }

      /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      .btn {
        padding: 10px 18px;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        border: 1px solid #d1d5db;
        background: #fff;
        transition: 0.2s;
        color: #374151;
      }
      .btn:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }
      .btn.primary {
        background: #1f4ddc;
        color: #fff;
        border-color: #163aa5;
      }
      .btn.primary:hover {
        background: #1b43c1;
      }
      .btn.success {
        background: #10b981;
        color: #fff;
        border-color: #059669;
      }
      .btn.danger {
        background: #fff;
        color: #e11d48;
        border-color: #ffcccc;
      }
      .btn.danger:hover {
        background: #fff1f2;
      }
      .btn.sm {
        padding: 5px 10px;
        font-size: 12px;
      }

      /* [ê³¼ì„¸íŠ¹ ì „ìš©] ë‹¨ì› ì„ íƒ ì¹© ìŠ¤íƒ€ì¼ */
      .chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 15px;
      }
      .chip {
        padding: 8px 14px;
        border-radius: 20px;
        font-size: 13px;
        border: 1px solid #d1d5db;
        background: #fff;
        cursor: pointer;
        transition: 0.2s;
        color: #4b5563;
      }
      .chip:hover {
        background: #f3f4f6;
      }
      .chip.active {
        background: #1f4ddc;
        color: #fff;
        border-color: #1f4ddc;
        font-weight: 600;
      }

      /* [ê³¼ì„¸íŠ¹ ì „ìš©] ì†Œë‹¨ì› ë²„íŠ¼ ê·¸ë£¹ */
      .subunit-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 15px;
      }
      .subunit-btn {
        padding: 6px 12px;
        border-radius: 6px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        font-size: 12px;
        cursor: pointer;
        transition: 0.2s;
      }
      .subunit-btn:hover {
        background: #e5e7eb;
      }
      .subunit-btn.active {
        background: #eff6ff;
        border-color: #1f4ddc;
        color: #1f4ddc;
        font-weight: 600;
      }

      /* [ê³¼ì„¸íŠ¹ ì „ìš©] ì„±ì·¨ìˆ˜ì¤€ ë¼ë””ì˜¤ ë²„íŠ¼ */
      .radio-group {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        padding: 10px;
        background: #f9fafb;
        border-radius: 8px;
        border: 1px solid #f3f4f6;
      }
      .radio-group label {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
      }
      .radio-group input[type="radio"] {
        accent-color: #1f4ddc;
      }

      /* ìš°ì¸¡ ë¯¸ë¦¬ë³´ê¸° & ì¹´ìš´í„° */
      .preview-box {
        flex: 1;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 25px;
        font-size: 15px;
        line-height: 1.8;
        white-space: pre-wrap;
        outline: none;
        background: #fff;
        overflow-y: auto;
      }
      .counter {
        text-align: right;
        margin-top: 10px;
        font-size: 13px;
        color: #6b7280;
      }

      .card-info-box {
        padding: 15px;
        background: #f0f9ff;
        border-left: 4px solid #1f4ddc;
        border-radius: 4px;
        margin-bottom: 15px;
      }
      .card-title {
        font-weight: 700;
        font-size: 15px;
        color: #1e3a8a;
        margin-bottom: 5px;
      }
      .card-desc {
        font-size: 13px;
        color: #1e40af;
        line-height: 1.4;
      }

      /* ë²„íŠ¼ ê·¸ë£¹ */
      .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      #toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: #fff;
        padding: 10px 25px;
        border-radius: 30px;
        font-size: 13px;
        opacity: 0;
        transition: 0.3s;
        z-index: 3000;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div id="toast">ì•Œë¦¼</div>
    <div class="topbar">ê³¼ëª©ë³„ ì„¸ë¶€ëŠ¥ë ¥ ë° íŠ¹ì´ì‚¬í•­</div>

    <div class="container">
      <section class="left">
        <div class="section-header">
          <div class="section-title">ë‹¨ì› ë° ì„±ì·¨ìˆ˜ì¤€ ì„ íƒ</div>
        </div>

        <div class="label">1. ëŒ€ë‹¨ì› ì„ íƒ</div>
        <div class="chip-row" id="unitChips">
          <div class="chip active" data-unit="ì»´í“¨íŒ… ì‹œìŠ¤í…œ">ì»´í“¨íŒ… ì‹œìŠ¤í…œ</div>
          <div class="chip" data-unit="ë°ì´í„°">ë°ì´í„°</div>
          <div class="chip" data-unit="ì•Œê³ ë¦¬ì¦˜ê³¼ í”„ë¡œê·¸ë˜ë°">
            ì•Œê³ ë¦¬ì¦˜ê³¼ í”„ë¡œê·¸ë˜ë°
          </div>
          <div class="chip" data-unit="ì¸ê³µì§€ëŠ¥">ì¸ê³µì§€ëŠ¥</div>
          <div class="chip" data-unit="ë””ì§€í„¸ ë¬¸í™”">ë””ì§€í„¸ ë¬¸í™”</div>
        </div>

        <div class="card-info-box">
          <div class="card-title" id="cardUnitTitle">
            [ì»´í“¨íŒ… ì‹œìŠ¤í…œ / ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬]
          </div>
          <div class="card-desc" id="cardCriterion">ì„±ì·¨ê¸°ì¤€ ë¡œë”© ì¤‘...</div>
        </div>

        <div class="label">2. ì†Œë‹¨ì› ì„ íƒ</div>
        <div class="subunit-row" id="subunitRow"></div>

        <div class="label">3. ì„±ì·¨ìˆ˜ì¤€ (A~E)</div>
        <div class="radio-group" id="levelGroup">
          <label
            ><input type="radio" name="level" value="A" checked /> A
            (íƒì›”)</label
          >
          <label><input type="radio" name="level" value="B" /> B (ìš°ìˆ˜)</label>
          <label><input type="radio" name="level" value="C" /> C (ë³´í†µ)</label>
          <label><input type="radio" name="level" value="D" /> D (ë…¸ë ¥)</label>
          <label><input type="radio" name="level" value="E" /> E (ë¯¸í¡)</label>
        </div>

        <div class="label">4. í™œë™ ì‚¬ë¡€ ì…ë ¥ (ì„ íƒ)</div>
        <textarea
          id="caseInput"
          class="textarea"
          placeholder="ì˜ˆ) í•™êµ Wi-Fi êµ¬ì¡°ë¥¼ ì¡°ì‚¬í•˜ê³  ìœ ì„ Â·ë¬´ì„  ì—°ê²° ë°©ì‹ì˜ ì°¨ì´ì ì„ ì„¤ëª…í•¨."
        ></textarea>

        <div class="action-buttons">
          <button class="btn primary" id="aiButton" style="flex: 1">
            âœ¨ AI ë¬¸ì¥ ìƒì„±
          </button>
          <button class="btn success" id="applyButton" style="flex: 1">
            ìš°ì¸¡ ê²°ê³¼ë¡œ ë°˜ì˜ â†’
          </button>
          <button class="btn danger" id="resetButton">ì´ˆê¸°í™”</button>
        </div>
      </section>

      <section class="right">
        <div class="section-header">
          <div class="section-title">ìµœì¢… ê¸°ì¬ ë‚´ìš© (ìˆ˜ì • ê°€ëŠ¥)</div>
          <div style="display: flex; gap: 8px">
            <button class="btn" id="refineButton">ğŸª„ ì „ì²´ AI ë‹¤ë“¬ê¸°</button>
            <button class="btn success" id="copyButton">ğŸ’¾ ì ìš©í•˜ê¸°</button>
          </div>
        </div>

        <div
          class="preview-box"
          id="previewBox"
          contenteditable="true"
          oninput="updateByteCount()"
        ></div>

        <div class="counter">
          ì‹¤ì‹œê°„ ìš©ëŸ‰:
          <span id="byteCount" style="color: #1f4ddc; font-weight: 700">0</span>
          / 1500 Byte
        </div>
      </section>
    </div>

    <script>
      /** ë°ì´í„° ì •ì˜ */
      const CURRICULUM_DATA = {
        "ì»´í“¨íŒ… ì‹œìŠ¤í…œ": {
          subunits: ["ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬", "ì‚¬ë¬¼ ì¸í„°ë„·", "ì‚¬ë¬¼ ì¸í„°ë„· ì„¤ê³„í•˜ê¸°"],
          standards: {
            "ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬":
              "ì„±ì·¨ê¸°ì¤€ [12ì •01-01]: ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ì˜ íŠ¹ì„±ì„ ì´í•´í•˜ê³ , ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ê³µìœ , í˜‘ë ¥, ì†Œí†µì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ êµ¬ì„±í•œë‹¤.",
            "ì‚¬ë¬¼ ì¸í„°ë„·":
              "ì„±ì·¨ê¸°ì¤€ [12ì •01-02]: ì‚¬ë¬¼ì¸í„°ë„·ì˜ êµ¬ì„±ê³¼ ë™ì‘ ì›ë¦¬ë¥¼ ë¶„ì„í•˜ê³ , ì‚¬ë¬¼ì¸í„°ë„· ê¸°ìˆ ë¡œ ì¸í•œ ê°œì¸ì˜ ì‚¶ê³¼ ì‚¬íšŒì˜ ë³€í™”ë¥¼ ì˜ˆì¸¡í•œë‹¤.",
            "ì‚¬ë¬¼ ì¸í„°ë„· ì„¤ê³„í•˜ê¸°":
              "ì„±ì·¨ê¸°ì¤€ [12ì •01-03]: ë¬¸ì œ í•´ê²°ì— ì í•©í•œ í”¼ì§€ì»¬ ì»´í“¨íŒ… ì‹œìŠ¤í…œ ì¥ì¹˜ë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ë¬¼ì¸í„°ë„· ì‹œìŠ¤í…œì„ ì„¤ê³„í•œë‹¤.",
          },
        },
        ë°ì´í„°: {
          subunits: [
            "ë°ì´í„° ì••ì¶•",
            "ë°ì´í„° ì•”í˜¸í™”",
            "ë¹…ë°ì´í„°ì™€ ë°ì´í„° ìˆ˜ì§‘",
            "ë°ì´í„° ì‹œê°í™”ì™€ í•´ì„",
          ],
          standards: {
            "ë°ì´í„° ì••ì¶•":
              "ì„±ì·¨ê¸°ì¤€ [12ì •02-01]: ë””ì§€í„¸ ë°ì´í„° ì••ì¶•ì˜ ê°œë…ê³¼ í•„ìš”ì„±ì„ ì´í•´í•˜ê³ , ì••ì¶•ì˜ íš¨ìœ¨ì„±ì„ ë¶„ì„í•˜ì—¬ í‰ê°€í•œë‹¤.",
            "ë°ì´í„° ì•”í˜¸í™”":
              "ì„±ì·¨ê¸°ì¤€ [12ì •02-02]: ì•”í˜¸í™”ì˜ ê°œë…ì„ ì´í•´í•˜ê³ , ì•”í˜¸í™”ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ì‚¬ë¡€ë¥¼ ë¹„êµâ‹…ë¶„ì„í•œë‹¤.",
            "ë¹…ë°ì´í„°ì™€ ë°ì´í„° ìˆ˜ì§‘":
              "ì„±ì·¨ê¸°ì¤€ [12ì •02-03]: ë¹…ë°ì´í„°ì˜ ê°œë…ê³¼ íŠ¹ì§•ì— ëŒ€í•œ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ë¬¸ì œ í•´ê²°ì— ì í•©í•œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œë‹¤.",
            "ë°ì´í„° ì‹œê°í™”ì™€ í•´ì„":
              "ì„±ì·¨ê¸°ì¤€ [12ì •02-04]: ë¹…ë°ì´í„° ë¶„ì„ ë„êµ¬ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ê·¸ ì˜ë¯¸ì™€ ê°€ì¹˜ë¥¼ í•´ì„í•œë‹¤.",
          },
        },
        "ì•Œê³ ë¦¬ì¦˜ê³¼ í”„ë¡œê·¸ë˜ë°": {
          subunits: [
            "ë¬¸ì œ ë¶„í•´ì™€ ëª¨ë¸ë§",
            "ì •í˜• ì•Œê³ ë¦¬ì¦˜",
            "íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜",
            "ìë£Œí˜•",
            "í‘œì¤€ ì…ì¶œë ¥ê³¼ íŒŒì¼ ì…ì¶œë ¥",
            "ë‹¤ì°¨ì› ë°ì´í„° êµ¬ì¡°",
            "ë‹¤ì–‘í•œ ì œì–´ êµ¬ì¡°",
            "ê°ì²´ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤",
            "ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜‘ë ¥ì  í”„ë¡œì íŠ¸",
          ],
          standards: {
            "ë¬¸ì œ ë¶„í•´ì™€ ëª¨ë¸ë§":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-01]: ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²° ê°€ëŠ¥í•œ ì‘ì€ ë¬¸ì œë¡œ ë¶„í•´í•˜ê³  ëª¨ë¸ë§í•œë‹¤.",
            "ì •í˜• ì•Œê³ ë¦¬ì¦˜":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-02]: ë°ì´í„°ë¥¼ ì •ë ¬í•˜ëŠ” ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ì˜ íŠ¹ì§•ê³¼ íš¨ìœ¨ì„ ë¹„êµâ‹…ë¶„ì„í•œë‹¤.",
            "íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-03]: ë°ì´í„°ë¥¼ íƒìƒ‰í•˜ëŠ” ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ì˜ íŠ¹ì§•ê³¼ íš¨ìœ¨ì„ ë¹„êµâ‹…ë¶„ì„í•œë‹¤.",
            ìë£Œí˜•:
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-04]: ìë£Œí˜•ì˜ ì¢…ë¥˜ì™€ íŠ¹ì„±ì„ ì•Œê³ , ì í•©í•œ ìë£Œí˜•ì„ ì„ íƒí•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤.",
            "í‘œì¤€ ì…ì¶œë ¥ê³¼ íŒŒì¼ ì…ì¶œë ¥":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-05]: í‘œì¤€ì…ì¶œë ¥ê³¼ íŒŒì¼ì…ì¶œë ¥ì„ í™œìš©í•œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤.",
            "ë‹¤ì°¨ì› ë°ì´í„° êµ¬ì¡°":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-06]: ë‹¤ì°¨ì› ë°ì´í„° êµ¬ì¡°ë¥¼ í™œìš©í•œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤.",
            "ë‹¤ì–‘í•œ ì œì–´ êµ¬ì¡°":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-07]: ë‹¤ì–‘í•œ ì œì–´ êµ¬ì¡°ë¥¼ ë³µí•©ì ìœ¼ë¡œ í™œìš©í•œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤.",
            "ê°ì²´ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤":
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-08]: ê°ì²´ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ì™€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•œë‹¤.",
            "ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜‘ë ¥ì  í”„ë¡œì íŠ¸": [
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-09]: ì‹¤ìƒí™œ ë° ë‹¤ì–‘í•œ í•™ë¬¸ ë¶„ì•¼ì˜ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í”„ë¡œê·¸ë¨ì„ í˜‘ë ¥ì ìœ¼ë¡œ ì„¤ê³„â‹…êµ¬í˜„í•œë‹¤.",
              "ì„±ì·¨ê¸°ì¤€ [12ì •03-10]: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ì„ í‰ê°€í•˜ê³  ê³µìœ í•œë‹¤.",
            ],
          },
        },
        ì¸ê³µì§€ëŠ¥: {
          subunits: [
            "ì§€ëŠ¥ ì—ì´ì „íŠ¸",
            "ê¸°ê³„í•™ìŠµì˜ ê°œë…ê³¼ ìœ í˜•",
            "ê¸°ê³„í•™ìŠµê³¼ ë¬¸ì œ í•´ê²°",
          ],
          standards: {
            "ì§€ëŠ¥ ì—ì´ì „íŠ¸":
              "ì„±ì·¨ê¸°ì¤€ [12ì •04-01]: ì§€ëŠ¥ ì—ì´ì „íŠ¸ì˜ ê°œë…ê³¼ íŠ¹ì„±ì„ ì´í•´í•˜ê³ , ì¸ê°„ê³¼ ì¸ê³µì§€ëŠ¥ì˜ ê´€ê³„ë¥¼ ë¶„ì„í•œë‹¤.",
            "ê¸°ê³„í•™ìŠµì˜ ê°œë…ê³¼ ìœ í˜•":
              "ì„±ì·¨ê¸°ì¤€ [12ì •04-02]: ê¸°ê³„í•™ìŠµì˜ ê°œë…ì„ ì´í•´í•˜ê³ , ì§€ë„í•™ìŠµê³¼ ë¹„ì§€ë„í•™ìŠµì˜ ì°¨ì´ë¥¼ ë¹„êµâ‹…ë¶„ì„í•œë‹¤.",
            "ê¸°ê³„í•™ìŠµê³¼ ë¬¸ì œ í•´ê²°":
              "ì„±ì·¨ê¸°ì¤€ [12ì •04-03]: ê¸°ê³„í•™ìŠµì„ í™œìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œì™€ ê·¸ë ‡ì§€ ì•Šì€ ë¬¸ì œë¥¼ êµ¬ë¶„í•˜ê³ , ì‚¬íšŒë¬¸ì œ í•´ê²°ì— ê¸°ê³„í•™ìŠµì„ ì ìš©í•œë‹¤.",
          },
        },
        "ë””ì§€í„¸ ë¬¸í™”": {
          subunits: [
            "ë””ì§€í„¸ ì‚¬íšŒì™€ ì§„ë¡œ",
            "ì •ë³´ ë³´í˜¸ì™€ ì •ë³´ ê³µìœ ",
            "ì •ë³´ ë³´ì•ˆ",
          ],
          standards: {
            "ë””ì§€í„¸ ì‚¬íšŒì™€ ì§„ë¡œ":
              "ì„±ì·¨ê¸°ì¤€ [12ì •05-01]: ë””ì§€í„¸ ê¸°ìˆ ì´ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ì˜í–¥ë ¥ì„ ë¶„ì„í•˜ê³  ë°œì „ ë°©í–¥ì„ ì˜ˆì¸¡í•˜ì—¬ ì§„ë¡œë¥¼ ì„¤ê³„í•œë‹¤.",
            "ì •ë³´ ë³´í˜¸ì™€ ì •ë³´ ê³µìœ ":
              "ì„±ì·¨ê¸°ì¤€ [12ì •05-02]: ë³´í˜¸í•´ì•¼ í•  ì •ë³´ì™€ ê³µìœ í•´ì•¼ í•  ì •ë³´ë¥¼ êµ¬ë¶„í•˜ê³ , ì˜¬ë°”ë¥¸ ì •ë³´ ë³´í˜¸ ë°©ë²•ì„ ì‹¤ì²œí•œë‹¤.",
            "ì •ë³´ ë³´ì•ˆ":
              "ì„±ì·¨ê¸°ì¤€ [12ì •05-03]: ì •ë³´ë³´ì•ˆì˜ í•„ìš”ì„±ì„ ì´í•´í•˜ê³ , ë³´ì•ˆ ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ë””ì§€í„¸ ìœ¤ë¦¬ë¥¼ ì‹¤ì²œí•œë‹¤.",
          },
        },
      };

      /** ë¬¸ì¥ ìƒì„± ë¡œì§ */
      const SentenceGenerator = {
        wireless: (level, activity) => {
          const activityText = activity ? `${activity} ` : "";
          const sentences = {
            A: `ì»´í“¨íŒ… ì‹œìŠ¤í…œ ë‹¨ì›ì˜ ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ ìˆ˜ì—…ì—ì„œ ${activityText}í•™êµ Wi-Fi êµ¬ì¡°ì™€ ìœ ì„ Â·ë¬´ì„  ì—°ê²° ë°©ì‹ì„ ìŠ¤ìŠ¤ë¡œ íƒêµ¬í•˜ê³  ì¹œêµ¬ë“¤ì—ê²Œ ì²´ê³„ì ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ë“± ë†’ì€ íƒêµ¬ ì—­ëŸ‰ì„ ë³´ì˜€ìœ¼ë©° ë„¤íŠ¸ì›Œí¬ì˜ íŠ¹ì„±ê³¼ ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ì •ë³´ ê³µìœ  ë°©ì‹ì„ ì •í™•íˆ ì´í•´í•˜ê³  ë‹¤ì–‘í•œ ìƒí™©ì— ì ìš©í•˜ì—¬ ì •ë³´ ê³µìœ Â·í˜‘ë ¥ í™˜ê²½ì„ ëŠ¥ë™ì ìœ¼ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì˜ ìš°ìˆ˜í•œ ìˆ˜í–‰ì„ ë³´ì˜€ë‹¤.`,
            B: `ì»´í“¨íŒ… ì‹œìŠ¤í…œ ë‹¨ì›ì˜ ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ ìˆ˜ì—…ì—ì„œ ${activityText}ë„¤íŠ¸ì›Œí¬ì˜ ê¸°ë³¸ ê°œë…ê³¼ íŠ¹ì„±ì„ ëŒ€ì²´ë¡œ ì •í™•íˆ ì´í•´í•˜ê³  ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ì •ë³´ ê³µìœ ì™€ í˜‘ë ¥ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” í™œë™ì— ì„±ì‹¤íˆ ì°¸ì—¬í•˜ëŠ” ë“± ì„±ì·¨ê¸°ì¤€ì„ ì•ˆì •ì ìœ¼ë¡œ ë‹¬ì„±í•˜ì˜€ë‹¤.`,
            C: `ì»´í“¨íŒ… ì‹œìŠ¤í…œ ë‹¨ì›ì˜ ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ ìˆ˜ì—…ì—ì„œ ${activityText}êµì‚¬ì˜ ì•ˆë‚´ì— ë”°ë¼ í•™êµ Wi-Fi êµ¬ì¡°ì™€ ìœ ì„ Â·ë¬´ì„  ì—°ê²° ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì •ë¦¬í•´ ë³´ë©° ê¸°ë³¸ ê°œë…ì„ ì´í•´í•˜ë ¤ëŠ” ëª¨ìŠµì„ ë³´ì˜€ê³  ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì„± ìš”ì†Œì™€ íŠ¹ì§•ì„ íŒŒì•…í•˜ì—¬ ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ì •ë³´ ê³µìœ  í™˜ê²½ì˜ í•„ìš”ì„±ì„ ì¸ì‹í•˜ê³  ê³¼ì œ ìˆ˜í–‰ì— ì°¸ì—¬í•˜ì˜€ë‹¤.`,
            D: `ì»´í“¨íŒ… ì‹œìŠ¤í…œ ë‹¨ì›ì˜ ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ ìˆ˜ì—…ì—ì„œ ${activityText}ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ì™€ ìœ ë¬´ì„  ì—°ê²° ë°©ì‹ ì´í•´ì— ë‹¤ì†Œ ì–´ë ¤ì›€ì„ ë³´ì˜€ìœ¼ë‚˜ êµì‚¬ì˜ ë„ì›€ì„ ë°›ìœ¼ë©° í•µì‹¬ ê°œë…ì„ ë¶€ë¶„ì ìœ¼ë¡œ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìœ¼ë©°, ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ì •ë³´ ê³µìœ  í™˜ê²½ì˜ ì˜ë¯¸ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì—…ì— ì°¸ì—¬í•˜ëŠ” ëª¨ìŠµì„ ë³´ì˜€ë‹¤.`,
            E: `ì»´í“¨íŒ… ì‹œìŠ¤í…œ ë‹¨ì›ì˜ ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ ìˆ˜ì—…ì—ì„œ ${activityText}ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì„± ìš”ì†Œì™€ ê°œë…ì„ ì´í•´í•˜ëŠ” ê³¼ì •ì—ì„œ ì „ë°˜ì ìœ¼ë¡œ ì–´ë ¤ì›€ì„ ë³´ì˜€ìœ¼ë©° ì»´í“¨íŒ… ì‹œìŠ¤í…œ ê°„ ì •ë³´ ê³µìœ ì˜ ê¸°ë³¸ ì›ë¦¬ë¥¼ ìµíˆê¸° ìœ„í•´ ê¸°ì´ˆ ê°œë…ë¶€í„° ì¬ì•ˆë‚´ì™€ ê°œë³„ì ì¸ ë³´ì¶© ì§€ë„ê°€ í•„ìš”í•œ ìˆ˜ì¤€ì´ì—ˆë‹¤.`,
          };
          return sentences[level] || sentences["C"];
        },
        generic: (unit, sub, level, activity) => {
          const levelPhrases = {
            A: "ì„±ì·¨ê¸°ì¤€ì„ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ê³  ì´ë¥¼ ë‹¤ì–‘í•œ ìƒí™©ì— ì‘ìš©í•˜ëŠ” ëª¨ìŠµì„ ë³´ì˜€ìœ¼ë©°, ",
            B: "ì„±ì·¨ê¸°ì¤€ì„ ì´í•´í•˜ê³  ìˆ˜ì—…ê³¼ í‰ê°€ í™œë™ì— ì„±ì‹¤íˆ ì°¸ì—¬í•˜ì˜€ìœ¼ë©°, ",
            C: "ê¸°ë³¸ ê°œë…ì„ ì´í•´í•˜ê³  êµì‚¬ì˜ ì•ˆë‚´ì— ë”°ë¼ ê³¼ì œë¥¼ ìˆ˜í–‰í•˜ì˜€ìœ¼ë©°, ",
            D: "í•µì‹¬ ê°œë… ì´í•´ì— ì–´ë ¤ì›€ì´ ìˆì—ˆìœ¼ë‚˜ ìˆ˜ì—…ì— ì°¸ì—¬í•˜ë©° ë‚´ìš©ì„ ë”°ë¼ê°€ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìœ¼ë©°, ",
            E: "ì „ë°˜ì ì¸ ê°œë… ì´í•´ì™€ ìˆ˜í–‰ì— ì–´ë ¤ì›€ì´ ìˆì–´ ê¸°ì´ˆë¶€í„° ë‹¨ê³„ì ì¸ ë³´ì¶© ì§€ë„ê°€ í•„ìš”í•œ ìˆ˜ì¤€ì´ì—ˆìœ¼ë©°, ",
          };
          const genericActivity = activity ? `${activity} í™œë™ì„ í†µí•´ ` : "";
          return `â€˜${unit}â€™ ë‹¨ì›ì˜ ã€Œ${sub}ã€ ìˆ˜ì—…ì—ì„œ ${genericActivity}${
            levelPhrases[level] || ""
          }í•´ë‹¹ ë‹¨ì›ì˜ ì„±ì·¨ê¸°ì¤€ì„ ë¶€ë¶„ì ìœ¼ë¡œ ë‹¬ì„±í•˜ëŠ” ëª¨ìŠµì„ ë³´ì˜€ë‹¤.`;
        },
      };

      /** DOM ìš”ì†Œ */
      const DOM = {
        unitChips: document.getElementById("unitChips"),
        subunitRow: document.getElementById("subunitRow"),
        cardTitle: document.getElementById("cardUnitTitle"),
        cardCriterion: document.getElementById("cardCriterion"),
        caseInput: document.getElementById("caseInput"),
        previewBox: document.getElementById("previewBox"),
        byteCount: document.getElementById("byteCount"),
        btns: {
          ai: document.getElementById("aiButton"),
          apply: document.getElementById("applyButton"),
          reset: document.getElementById("resetButton"),
          refine: document.getElementById("refineButton"),
          copy: document.getElementById("copyButton"),
        },
      };

      let state = { unit: "ì»´í“¨íŒ… ì‹œìŠ¤í…œ", subunit: "ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬" };

      function renderSubunitButtons(unit) {
        DOM.subunitRow.innerHTML = "";
        const subunits = CURRICULUM_DATA[unit]?.subunits || [];
        subunits.forEach((name, idx) => {
          const btn = document.createElement("button");
          btn.className = `subunit-btn ${idx === 0 ? "active" : ""}`;
          btn.dataset.sub = name;
          btn.textContent = name;
          DOM.subunitRow.appendChild(btn);
        });
        state.subunit = subunits[0] || "";
        updateCardInfo();
      }

      function updateCardInfo() {
        DOM.cardTitle.textContent = `[${state.unit} / ${state.subunit}]`;
        const standard =
          CURRICULUM_DATA[state.unit]?.standards?.[state.subunit];
        if (Array.isArray(standard)) {
          DOM.cardCriterion.innerHTML = standard
            .map((s) => `<div>Â· ${s}</div>`)
            .join("");
        } else {
          DOM.cardCriterion.textContent =
            standard || "ì„±ì·¨ê¸°ì¤€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        }
        DOM.caseInput.value = "";
      }

      function showToast(msg) {
        const t = document.getElementById("toast");
        t.textContent = msg;
        t.style.opacity = 1;
        setTimeout(() => (t.style.opacity = 0), 2000);
      }

      // [í•µì‹¬] Byte ê³„ì‚° í•¨ìˆ˜ (í•œê¸€ 3Byte, ê·¸ ì™¸ 1Byte)
      function updateByteCount() {
        const text = DOM.previewBox.innerText;
        let bytes = 0;
        for (let i = 0; i < text.length; i++) {
          bytes += text.charCodeAt(i) > 127 ? 3 : 1;
        }
        DOM.byteCount.textContent = bytes;
        DOM.byteCount.style.color = bytes > 1500 ? "red" : "#1f4ddc";
      }

      /* ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ */
      DOM.unitChips.addEventListener("click", (e) => {
        const chip = e.target.closest(".chip");
        if (!chip) return;
        document
          .querySelectorAll(".chip")
          .forEach((c) => c.classList.remove("active"));
        chip.classList.add("active");
        state.unit = chip.dataset.unit;
        renderSubunitButtons(state.unit);
      });

      DOM.subunitRow.addEventListener("click", (e) => {
        const btn = e.target.closest(".subunit-btn");
        if (!btn) return;
        document
          .querySelectorAll(".subunit-btn")
          .forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        state.subunit = btn.dataset.sub;
        updateCardInfo();
      });

      DOM.btns.ai.addEventListener("click", () => {
        const level =
          document.querySelector('input[name="level"]:checked')?.value || "C";
        const rawCase = DOM.caseInput.value.trim();
        let sentence = "";

        if (
          state.unit === "ì»´í“¨íŒ… ì‹œìŠ¤í…œ" &&
          state.subunit === "ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬"
        ) {
          sentence = SentenceGenerator.wireless(level, rawCase);
        } else {
          sentence = SentenceGenerator.generic(
            state.unit,
            state.subunit,
            level,
            rawCase
          );
        }

        const currentVal = DOM.caseInput.value.trim();
        DOM.caseInput.value =
          currentVal && currentVal !== sentence
            ? `${currentVal}\n${sentence}`
            : sentence;
        showToast("AI ë¬¸ì¥ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
      });

      DOM.btns.apply.addEventListener("click", () => {
        const text = DOM.caseInput.value.trim();
        if (!text) return alert("ì…ë ¥ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.");
        const current = DOM.previewBox.innerText; // innerText ì‚¬ìš© ê¶Œì¥
        DOM.previewBox.innerText = current ? `${current}\n\n${text}` : text;
        updateByteCount();
        showToast("ìš°ì¸¡ ê²°ê³¼ì°½ì— ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
      });

      DOM.btns.reset.addEventListener("click", () => {
        DOM.caseInput.value = "";
        showToast("ì…ë ¥ì°½ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
      });

      DOM.btns.refine.addEventListener("click", () =>
        showToast("ë¬¸ë§¥ì„ ë‹¤ë“¬ëŠ” ì¤‘ì…ë‹ˆë‹¤...")
      );

      DOM.btns.copy.addEventListener("click", () => {
        alert("ì‘ì„±ëœ ë‚´ìš©ì„ NEISì— ì…ë ¥í•©ë‹ˆë‹¤.");
      });

      // ì´ˆê¸° ì‹¤í–‰
      renderSubunitButtons(state.unit);
      updateByteCount();
    </script>
  </body>
</html>
