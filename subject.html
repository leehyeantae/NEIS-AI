<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>과목별 세부능력 및 특이사항</title>
    <style>
      /* --- 디자인은 기존과 100% 동일하게 유지 --- */
      * {
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui,
          sans-serif;
      }
      body {
        margin: 0;
        background: #f5f5f7;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      .app {
        background: #ffffff;
        width: 1920px;
        height: 1080px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .app-header {
        padding: 10px 16px;
        border-bottom: 1px solid #e5e5ea;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #fafafa;
      }
      .app-title {
        font-size: 15px;
        font-weight: 600;
      }
      .app-subtitle {
        font-size: 12px;
        color: #666;
      }
      .app-body {
        flex: 1;
        display: flex;
        min-height: 0;
      }
      .left-panel,
      .right-panel {
        flex: 1;
        padding: 16px;
        min-width: 0;
      }
      .left-panel {
        border-right: 1px solid #e5e5ea;
      }
      .chip-row {
        margin-bottom: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .chip {
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid #d0d0d7;
        background: #fff;
        cursor: pointer;
        user-select: none;
      }
      .chip.active {
        background: #2563eb;
        color: #fff;
        border-color: #2563eb;
      }
      .card {
        border: 1px solid #e5e5ea;
        border-radius: 10px;
        padding: 14px;
        height: calc(100% - 40px);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .card-title {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 4px;
      }
      .card-subtitle {
        font-size: 12px;
        color: #666;
        margin-bottom: 8px;
        line-height: 1.5;
      } /* 줄간격 추가 */
      .radio-group {
        font-size: 12px;
        display: flex;
        gap: 8px;
        margin-bottom: 4px;
      }
      .radio-group label {
        cursor: pointer;
      }
      .subunit-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 4px;
      }
      .subunit-btn {
        padding: 4px 10px;
        border-radius: 8px;
        border: 1px solid #d0d0d7;
        background: #fff;
        font-size: 11px;
        cursor: pointer;
      }
      .subunit-btn.active {
        background: #e0edff;
        border-color: #2563eb;
        color: #1d4ed8;
      }
      .textarea-label {
        font-size: 11px;
        color: #555;
        margin-top: 4px;
        margin-bottom: 2px;
      }
      textarea {
        width: 100%;
        height: 120px;
        resize: none;
        border-radius: 8px;
        border: 1px solid #d0d0d7;
        padding: 8px;
        font-size: 12px;
        white-space: pre-wrap;
      }
      .btn-row {
        margin-top: 6px;
        display: flex;
        gap: 6px;
      }
      .btn {
        padding: 6px 12px;
        font-size: 12px;
        border-radius: 8px;
        border: 1px solid #d0d0d7;
        background: #fff;
        cursor: pointer;
      }
      .btn-primary {
        background: #2563eb;
        color: #fff;
        border-color: #2563eb;
      }
      .btn-danger {
        background: #fef2f2;
        color: #b91c1c;
        border-color: #fecaca;
      }
      .right-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 6px;
      }
      .right-title {
        font-size: 14px;
        font-weight: 600;
      }
      .right-caption {
        font-size: 11px;
        color: #777;
      }
      .preview-box {
        border: 1px solid #e5e5ea;
        border-radius: 10px;
        height: calc(100% - 26px);
        padding: 10px;
        font-size: 12px;
        overflow-y: auto;
        white-space: pre-wrap;
        background: #fff;
      }
      .preview-toolbar {
        display: flex;
        gap: 6px;
        align-items: center;
        margin-bottom: 4px;
      }
      .char-count {
        font-size: 11px;
        color: #777;
        margin-left: auto;
      }
      .hint {
        font-size: 10px;
        color: #999;
        margin-top: 4px;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <div>
          <div class="app-title">과목별 세부능력 및 특이사항</div>
          <div class="app-subtitle">
            대단원 · 소단원 · 성취수준(A~E)을 선택하고 사례를 입력하면
            과목별세부능력및특이사항 문장이 생성됩니다.
          </div>
        </div>
      </header>

      <div class="app-body">
        <section class="left-panel">
          <div class="chip-row" id="unitChips">
            <div class="chip active" data-unit="컴퓨팅 시스템">
              컴퓨팅 시스템
            </div>
            <div class="chip" data-unit="데이터">데이터</div>
            <div class="chip" data-unit="알고리즘과 프로그래밍">
              알고리즘과 프로그래밍
            </div>
            <div class="chip" data-unit="인공지능">인공지능</div>
            <div class="chip" data-unit="디지털 문화">디지털 문화</div>
          </div>

          <div class="card">
            <div class="card-title" id="cardUnitTitle">
              [컴퓨팅 시스템 / 유무선 네트워크]
            </div>
            <div class="card-subtitle" id="cardCriterion">
              성취기준 로딩 중...
            </div>

            <div class="textarea-label">소단원 선택</div>
            <div class="subunit-row" id="subunitRow"></div>

            <div class="textarea-label">성취수준 선택 (A~E)</div>
            <div class="radio-group" id="levelGroup">
              <label
                ><input type="radio" name="level" value="A" checked /> A</label
              >
              <label><input type="radio" name="level" value="B" /> B</label>
              <label><input type="radio" name="level" value="C" /> C</label>
              <label><input type="radio" name="level" value="D" /> D</label>
              <label><input type="radio" name="level" value="E" /> E</label>
            </div>

            <div class="textarea-label">
              수업·평가 활동 사례 입력 (교사가 직접 작성)
            </div>
            <textarea
              id="caseInput"
              placeholder="예) 학교 Wi-Fi 구조를 조사하고 유선·무선 연결 방식의 차이점을 친구들에게 설명함."
            ></textarea>

            <div class="btn-row">
              <button class="btn" id="aiButton">AI</button>
              <button class="btn-primary btn" id="applyButton">적용</button>
              <button class="btn btn-danger" id="resetButton">취소</button>
            </div>
            <div class="hint">
              ※ '유무선 네트워크'의 경우 A~E 수준별 맞춤 문장이 생성되며, 그 외
              단원은 기본 템플릿이 적용됩니다.
            </div>
          </div>
        </section>

        <section class="right-panel">
          <div class="right-header">
            <div>
              <div class="right-title">
                작성 내용 (최대 1,500자) · 직접 편집 가능
              </div>
              <div class="right-caption">
                왼쪽에서 [AI] 생성 후 [적용]을 누르면 누적됩니다.
              </div>
            </div>
          </div>
          <div class="preview-toolbar">
            <button class="btn" id="refineButton">전체 AI 다듬기</button>
            <button class="btn-primary btn" id="copyButton">
              적용(NEIS 입력)
            </button>
            <span class="char-count" id="charCount">0 / 1500자</span>
          </div>
          <div class="preview-box" id="previewBox" contenteditable="true"></div>
          <div class="hint">
            ※ 생성된 내용은 반드시 교사가 최종 확인해야 합니다.
          </div>
        </section>
      </div>
    </div>

    <script>
      /**
       * 1. 데이터 정의 (Data Layer)
       * - 단원 구조 및 성취 기준 매핑 (사용자 제공 내용으로 업데이트됨)
       */
      const CURRICULUM_DATA = {
        "컴퓨팅 시스템": {
          subunits: ["유무선 네트워크", "사물 인터넷", "사물 인터넷 설계하기"],
          standards: {
            "유무선 네트워크":
              "성취기준 [12정01-01]: 유무선 네트워크의 특성을 이해하고, 컴퓨팅 시스템 간 공유, 협력, 소통을 위한 네트워크 환경을 구성한다.",
            "사물 인터넷":
              "성취기준 [12정01-02]: 사물인터넷의 구성과 동작 원리를 분석하고, 사물인터넷 기술로 인한 개인의 삶과 사회의 변화를 예측한다.",
            "사물 인터넷 설계하기":
              "성취기준 [12정01-03]: 문제 해결에 적합한 피지컬 컴퓨팅 시스템 장치를 선택하여 사물인터넷 시스템을 설계한다.",
          },
        },
        데이터: {
          subunits: [
            "데이터 압축",
            "데이터 암호화",
            "빅데이터와 데이터 수집",
            "데이터 시각화와 해석",
          ],
          standards: {
            "데이터 압축":
              "성취기준 [12정02-01]: 디지털 데이터 압축의 개념과 필요성을 이해하고, 압축의 효율성을 분석하여 평가한다.",
            "데이터 암호화":
              "성취기준 [12정02-02]: 암호화의 개념을 이해하고, 암호화를 활용하여 데이터를 안전하게 관리하는 사례를 비교⋅분석한다.",
            "빅데이터와 데이터 수집":
              "성취기준 [12정02-03]: 빅데이터의 개념과 특징에 대한 이해를 바탕으로, 문제 해결에 적합한 데이터를 수집한다.",
            "데이터 시각화와 해석":
              "성취기준 [12정02-04]: 빅데이터 분석 도구를 활용하여 데이터를 시각화하고 그 의미와 가치를 해석한다.",
          },
        },
        "알고리즘과 프로그래밍": {
          subunits: [
            "문제 분해와 모델링",
            "정형 알고리즘",
            "탐색 알고리즘",
            "자료형",
            "표준 입출력과 파일 입출력",
            "다차원 데이터 구조",
            "다양한 제어 구조",
            "객체를 구현하는 클래스",
            "문제 해결을 위한 협력적 프로젝트",
          ],
          standards: {
            "문제 분해와 모델링":
              "성취기준 [12정03-01]: 복잡한 문제를 해결 가능한 작은 문제로 분해하고 모델링한다.",
            "정형 알고리즘":
              "성취기준 [12정03-02]: 데이터를 정렬하는 다양한 알고리즘의 특징과 효율을 비교⋅분석한다.",
            "탐색 알고리즘":
              "성취기준 [12정03-03]: 데이터를 탐색하는 다양한 알고리즘의 특징과 효율을 비교⋅분석한다.",
            자료형:
              "성취기준 [12정03-04]: 자료형의 종류와 특성을 알고, 적합한 자료형을 선택하여 프로그램을 작성한다.",
            "표준 입출력과 파일 입출력":
              "성취기준 [12정03-05]: 표준입출력과 파일입출력을 활용한 프로그램을 작성한다.",
            "다차원 데이터 구조":
              "성취기준 [12정03-06]: 다차원 데이터 구조를 활용한 프로그램을 작성한다.",
            "다양한 제어 구조":
              "성취기준 [12정03-07]: 다양한 제어 구조를 복합적으로 활용한 프로그램을 작성한다.",
            "객체를 구현하는 클래스":
              "성취기준 [12정03-08]: 객체를 구현하는 클래스와 인스턴스를 활용하여 프로그램을 작성한다.",
            // [수정 및 배열 유지] 협력적 프로젝트는 2개의 성취기준을 배열로 처리
            "문제 해결을 위한 협력적 프로젝트": [
              "성취기준 [12정03-09]: 실생활 및 다양한 학문 분야의 문제 해결을 위한 프로그램을 협력적으로 설계⋅구현한다.",
              "성취기준 [12정03-10]: 문제 해결을 위한 프로그램의 성능을 평가하고 공유한다.",
            ],
          },
        },
        인공지능: {
          subunits: [
            "지능 에이전트",
            "기계학습의 개념과 유형",
            "기계학습과 문제 해결",
          ],
          standards: {
            "지능 에이전트":
              "성취기준 [12정04-01]: 지능 에이전트의 개념과 특성을 이해하고, 인간과 인공지능의 관계를 분석한다.",
            "기계학습의 개념과 유형":
              "성취기준 [12정04-02]: 기계학습의 개념을 이해하고, 지도학습과 비지도학습의 차이를 비교⋅분석한다.",
            "기계학습과 문제 해결":
              "성취기준 [12정04-03]: 기계학습을 활용하여 해결할 수 있는 문제와 그렇지 않은 문제를 구분하고, 사회문제 해결에 기계학습을 적용한다.",
          },
        },
        "디지털 문화": {
          subunits: [
            "디지털 사회와 진로",
            "정보 보호와 정보 공유",
            "정보 보안",
          ],
          standards: {
            "디지털 사회와 진로":
              "성취기준 [12정05-01]: 디지털 기술이 사회에 미치는 영향력을 분석하고 발전 방향을 예측하여 진로를 설계한다.",
            "정보 보호와 정보 공유":
              "성취기준 [12정05-02]: 보호해야 할 정보와 공유해야 할 정보를 구분하고, 올바른 정보 보호 방법을 실천한다.",
            "정보 보안":
              "성취기준 [12정05-03]: 정보보안의 필요성을 이해하고, 보안 기술을 활용하여 디지털 윤리를 실천한다.",
          },
        },
      };

      /**
       * 2. 유틸리티 및 템플릿 함수 (Logic Layer)
       */
      const SentenceGenerator = {
        // 유무선 네트워크 전용 상세 템플릿
        wireless: (level, activity) => {
          const activityText = activity ? `${activity} ` : ""; // 활동 내용을 문장 맨 앞에 배치

          const sentences = {
            A: `컴퓨팅 시스템 단원의 유무선 네트워크 수업에서 ${activityText}학교 Wi-Fi 구조와 유선·무선 연결 방식을 스스로 탐구하고 친구들에게 체계적으로 설명하는 등 높은 탐구 역량을 보였으며 네트워크의 특성과 컴퓨팅 시스템 간 정보 공유 방식을 정확히 이해하고 다양한 상황에 적용하여 정보 공유·협력 환경을 능동적으로 설계할 수 있는 수준의 우수한 수행을 보였다.`,
            B: `컴퓨팅 시스템 단원의 유무선 네트워크 수업에서 ${activityText}네트워크의 기본 개념과 특성을 대체로 정확히 이해하고 이를 바탕으로 컴퓨팅 시스템 간 정보 공유와 협력 환경을 구성하는 활동에 성실히 참여하는 등 성취기준을 안정적으로 달성하였다.`,
            C: `컴퓨팅 시스템 단원의 유무선 네트워크 수업에서 ${activityText}교사의 안내에 따라 학교 Wi-Fi 구조와 유선·무선 연결 방식의 차이를 정리해 보며 기본 개념을 이해하려는 모습을 보였고 네트워크의 구성 요소와 특징을 파악하여 컴퓨팅 시스템 간 정보 공유 환경의 필요성을 인식하고 과제 수행에 참여하였다.`,
            D: `컴퓨팅 시스템 단원의 유무선 네트워크 수업에서 ${activityText}네트워크 구조와 유무선 연결 방식 이해에 다소 어려움을 보였으나 교사의 도움을 받으며 핵심 개념을 부분적으로 이해하려고 노력하였으며, 컴퓨팅 시스템 간 정보 공유 환경의 의미를 파악하기 위해 지속적으로 수업에 참여하는 모습을 보였다.`,
            E: `컴퓨팅 시스템 단원의 유무선 네트워크 수업에서 ${activityText}유무선 네트워크의 구성 요소와 개념을 이해하는 과정에서 전반적으로 어려움을 보였으며 컴퓨팅 시스템 간 정보 공유의 기본 원리를 익히기 위해 기초 개념부터 재안내와 개별적인 보충 지도가 필요한 수준이었다.`,
          };
          return sentences[level] || sentences["C"];
        },
        // 일반적인 템플릿
        generic: (unit, sub, level, activity) => {
          const levelPhrases = {
            A: "성취기준을 깊이 있게 이해하고 이를 다양한 상황에 응용하는 모습을 보였으며, ",
            B: "성취기준을 이해하고 수업과 평가 활동에 성실히 참여하였으며, ",
            C: "기본 개념을 이해하고 교사의 안내에 따라 과제를 수행하였으며, ",
            D: "핵심 개념 이해에 어려움이 있었으나 수업에 참여하며 내용을 따라가려고 노력하였으며, ",
            E: "전반적인 개념 이해와 수행에 어려움이 있어 기초부터 단계적인 보충 지도가 필요한 수준이었으며, ",
          };
          const genericActivity = activity ? `${activity} 활동을 통해 ` : "";
          return `‘${unit}’ 단원의 「${sub}」 수업에서 ${genericActivity}${
            levelPhrases[level] || ""
          }해당 단원의 성취기준을 부분적으로 달성하는 모습을 보였다.`;
        },
      };

      /**
       * 3. DOM 요소 및 상태 관리 (UI Layer)
       */
      const DOM = {
        unitChips: document.getElementById("unitChips"),
        subunitRow: document.getElementById("subunitRow"),
        cardTitle: document.getElementById("cardUnitTitle"),
        cardCriterion: document.getElementById("cardCriterion"),
        caseInput: document.getElementById("caseInput"),
        previewBox: document.getElementById("previewBox"),
        charCount: document.getElementById("charCount"),
        btns: {
          ai: document.getElementById("aiButton"),
          apply: document.getElementById("applyButton"),
          reset: document.getElementById("resetButton"),
          refine: document.getElementById("refineButton"),
          copy: document.getElementById("copyButton"),
        },
      };

      // 상태 관리 변수
      let state = {
        unit: "컴퓨팅 시스템",
        subunit: "유무선 네트워크",
      };

      /**
       * 4. 렌더링 및 UI 업데이트 함수
       */
      function renderSubunitButtons(unit) {
        DOM.subunitRow.innerHTML = "";
        const subunits = CURRICULUM_DATA[unit]?.subunits || [];

        subunits.forEach((name, idx) => {
          const btn = document.createElement("button");
          btn.className = `subunit-btn ${idx === 0 ? "active" : ""}`;
          btn.dataset.sub = name;
          btn.textContent = name;
          DOM.subunitRow.appendChild(btn);
        });

        // 첫 번째 소단원으로 상태 업데이트
        state.subunit = subunits[0] || "";
        updateCardInfo();
      }

      function updateCardInfo() {
        // 타이틀 업데이트
        DOM.cardTitle.textContent = `[${state.unit} / ${state.subunit}]`;

        // 성취기준 업데이트
        const standard =
          CURRICULUM_DATA[state.unit]?.standards?.[state.subunit];

        // 성취기준이 배열이면 줄바꿈하여 표시, 문자열이면 그대로 표시
        if (Array.isArray(standard)) {
          // 배열인 경우 (예: 협력적 프로젝트)
          // 각 기준 앞에 · 기호를 붙여 목록처럼 보이게 합니다.
          DOM.cardCriterion.innerHTML = standard
            .map((s) => `<div>· ${s}</div>`)
            .join("");
        } else {
          // 문자열인 경우 (일반)
          DOM.cardCriterion.textContent =
            standard ||
            "성취기준: 선택한 단원에 해당하는 성취기준을 불러올 수 없습니다.";
        }

        // 입력창 초기화
        DOM.caseInput.value = "";
      }

      function updateCharCount() {
        DOM.charCount.textContent = `${DOM.previewBox.textContent.length} / 1500자`;
      }

      /**
       * 5. 이벤트 핸들러 (Event Layer)
       */

      // 대단원(Chip) 클릭
      DOM.unitChips.addEventListener("click", (e) => {
        const chip = e.target.closest(".chip");
        if (!chip) return;

        // UI 활성화
        document
          .querySelectorAll(".chip")
          .forEach((c) => c.classList.remove("active"));
        chip.classList.add("active");

        // 상태 업데이트 및 렌더링
        state.unit = chip.dataset.unit;
        renderSubunitButtons(state.unit);
      });

      // 소단원(Button) 클릭
      DOM.subunitRow.addEventListener("click", (e) => {
        const btn = e.target.closest(".subunit-btn");
        if (!btn) return;

        // UI 활성화
        document
          .querySelectorAll(".subunit-btn")
          .forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        // 상태 업데이트
        state.subunit = btn.dataset.sub;
        updateCardInfo();
      });

      // AI 생성 버튼 클릭
      DOM.btns.ai.addEventListener("click", () => {
        const level =
          document.querySelector('input[name="level"]:checked')?.value || "C";
        const rawCase = DOM.caseInput.value.trim();

        let sentence = "";

        // 유무선 네트워크 특화 로직 vs 일반 로직
        if (
          state.unit === "컴퓨팅 시스템" &&
          state.subunit === "유무선 네트워크"
        ) {
          // 유무선 네트워크는 activityText 처리를 내부에서 별도로 함 (기존 로직 유지)
          sentence = SentenceGenerator.wireless(level, rawCase);
        } else {
          // 일반 로직
          sentence = SentenceGenerator.generic(
            state.unit,
            state.subunit,
            level,
            rawCase
          );
        }

        // 텍스트 누적
        const currentVal = DOM.caseInput.value.trim();
        DOM.caseInput.value =
          currentVal && currentVal !== sentence
            ? `${currentVal}\n${sentence}`
            : sentence;
      });

      // 적용 버튼
      DOM.btns.apply.addEventListener("click", () => {
        const text = DOM.caseInput.value.trim();
        if (!text) return;
        const current = DOM.previewBox.textContent.trim();
        DOM.previewBox.textContent = current ? `${current}\n\n${text}` : text;
        DOM.previewBox.textContent = DOM.previewBox.textContent.slice(0, 1500);
        updateCharCount();
      });

      // 초기화 및 기타 버튼들
      DOM.btns.reset.addEventListener(
        "click",
        () => (DOM.caseInput.value = "")
      );
      DOM.btns.refine.addEventListener("click", () =>
        alert("작성된 내용을 수정하였습니다. 확인하시기 바랍니다.")
      );
      DOM.btns.copy.addEventListener("click", async () => {
        const text = DOM.previewBox.textContent.trim();
        if (!text) return;
        try {
          await navigator.clipboard.writeText(text);
          alert("작성된 내용을 NEIS에 입력합니다.");
        } catch (e) {
          alert("복사 실패");
        }
      });
      DOM.previewBox.addEventListener("input", updateCharCount);

      // --- 초기 실행 ---
      renderSubunitButtons(state.unit);
      updateCharCount();
    </script>
  </body>
</html>
