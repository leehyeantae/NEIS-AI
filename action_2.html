<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í–‰ë™íŠ¹ì„± ë° ì¢…í•©ì˜ê²¬</title>
    <style>
      /* --- [ê³µí†µ ë ˆì´ì•„ì›ƒ] --- */
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", -apple-system, sans-serif;
        background: #f5f6f8;
        color: #333;
        overflow: hidden;
      }
      .topbar {
        height: 48px;
        background: #f5c6cf;
        display: flex;
        align-items: center;
        padding: 0 16px;
        font-weight: 700;
        border-bottom: 1px solid #e5adba;
        color: #333;
        flex-shrink: 0;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        height: calc(100vh - 48px);
      }
      .left,
      .right {
        padding: 25px;
        display: flex;
        flex-direction: column;
        background: #fff;
        overflow-y: auto;
        min-height: 0;
      }
      .left {
        border-right: 1px solid #e5e7eb;
        gap: 15px;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
        flex-shrink: 0;
      }
      .section-title {
        font-size: 16px;
        font-weight: 700;
        color: #1f2937;
      }

      .input,
      .textarea,
      .select {
        width: 100%;
        padding: 10px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        font-size: 14px;
        transition: 0.2s;
      }
      .textarea {
        resize: none;
        line-height: 1.6;
      }

      .btn {
        padding: 10px 18px;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        border: 1px solid #d1d5db;
        background: #fff;
        transition: 0.2s;
        flex-shrink: 0;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }
      .btn.primary {
        background: #1f4ddc;
        color: #fff;
        border-color: #163aa5;
      }
      .btn.success {
        background: #10b981;
        color: #fff;
        border-color: #059669;
      }
      .btn.danger-btn {
        color: #ef4444;
        font-weight: bold;
        border: 1px solid #fecaca;
        background: #fff5f5;
      }
      .btn.sm {
        padding: 6px 12px;
        font-size: 12px;
      }

      /* --- [ìš°ì¸¡ ë§ˆìŠ¤í„° íŒ¨ë„] --- */
      .preview-box {
        flex: 6;
        min-height: 150px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 25px;
        font-size: 15px;
        line-height: 1.8;
        outline: none;
        background: #fff;
        overflow-y: auto;
        white-space: pre-wrap;
        word-break: break-all;
        scroll-behavior: smooth;
      }
      .sentence-block {
        cursor: text;
        transition: background 0.4s ease-out;
        border-radius: 4px;
        padding: 2px 0;
      }
      .sentence-block:hover {
        background-color: #eff6ff;
      }
      .highlight-active {
        background-color: #fef08a !important;
      }

      .counter {
        text-align: right;
        margin-top: 10px;
        font-size: 13px;
        color: #6b7280;
        flex-shrink: 0;
      }
      .info-layer {
        flex: 4;
        min-height: 150px;
        border: 1px solid #e5e7eb;
        background: #fafafa;
        border-radius: 12px;
        padding: 15px;
        overflow-y: auto;
        margin-top: 15px;
      }

      .info-card {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-bottom: 8px;
        font-size: 13px;
        border-left: 4px solid #1f4ddc;
        transition: 0.2s;
        position: relative;
        cursor: pointer;
        overflow: hidden;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.02);
      }
      .info-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border-color: #cbd5e1;
      }
      .info-card.duplicate {
        border-left-color: #f59e0b;
        background: #fffbeb;
      }
      .info-card.deleted {
        border-left-color: #ef4444;
        opacity: 0.5;
        background: #fff5f5;
        pointer-events: none;
      }
      .info-card.optimized {
        border-left-color: #8b5cf6;
        background: #f5f3ff;
      }

      .accordion-header {
        padding: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 700;
        color: #333;
      }
      .accordion-chevron {
        transition: transform 0.3s ease;
        color: #9ca3af;
        font-size: 12px;
      }
      .info-card.expanded .accordion-chevron {
        transform: rotate(180deg);
      }

      .accordion-body-wrapper {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows 0.3s ease;
      }
      .info-card.expanded .accordion-body-wrapper {
        grid-template-rows: 1fr;
      }
      .accordion-body {
        overflow: hidden;
        padding: 0 12px;
      }
      .accordion-content {
        padding-bottom: 12px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .tag {
        padding: 4px 10px;
        border-radius: 6px;
        font-size: 11px;
        background: #f3f4f6;
        color: #4b5563;
        border: 1px solid #e5e7eb;
        display: inline-block;
        font-weight: bold;
      }
      .dup-badge {
        background: #f59e0b;
        color: #fff;
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 12px;
        font-weight: 700;
        margin-left: 8px;
      }
      .status-badge {
        font-size: 10px;
        padding: 3px 6px;
        border-radius: 4px;
        color: #fff;
        background: #10b981;
      }
      .delete-sentence-btn {
        background: #fee2e2;
        color: #ef4444;
        border: 1px solid #fca5a5;
        border-radius: 6px;
        padding: 4px 10px;
        font-size: 11px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
        align-self: flex-end;
      }
      .delete-sentence-btn:hover {
        background: #ef4444;
        color: #fff;
      }

      /* --- [ëª¨ë‹¬ ë° í‚¤ì›Œë“œ íŒ¨ë„] --- */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
      }
      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 1100px;
        height: 90vh;
        background: #fff;
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .modal-header {
        padding: 20px 30px;
        background: #f9fafb;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0;
      }
      .modal-body {
        display: grid;
        grid-template-columns: 240px 1fr;
        flex: 1;
        overflow: hidden;
      }

      .student-list {
        background: #f8fafc;
        border-right: 1px solid #e5e7eb;
        padding: 15px 0;
        overflow-y: auto;
      }
      .student-item {
        padding: 16px 30px;
        cursor: pointer;
        border-bottom: 1px solid #f1f5f9;
        font-size: 15px;
        transition: 0.2s;
      }
      .student-item.active {
        background: #eff6ff;
        color: #1f4ddc;
        font-weight: 700;
        border-right: 4px solid #1f4ddc;
      }

      .log-entry {
        padding: 35px;
        overflow-y: auto;
        background: #fff;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .input-wrapper {
        border-bottom: 1px dashed #e5e7eb;
        padding-bottom: 15px;
        margin-bottom: 15px;
      }
      .keyword-tray {
        display: flex;
        background: #f0f7ff;
        border: 1px solid #dbeafe;
        border-radius: 8px;
        padding: 10px;
        margin-top: 10px;
        gap: 8px;
        flex-wrap: wrap;
      }
      .keyword-tray.hidden {
        display: none;
      }

      .keyword-chip {
        font-size: 12px;
        background: #fff;
        border: 1px solid #bbd1f8;
        color: #1e40af;
        padding: 6px 12px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.2s;
        user-select: none;
      }
      .keyword-chip:hover {
        background: #dbeafe;
      }
      .keyword-chip.active {
        background: #1f4ddc;
        color: #fff;
        border-color: #1f4ddc;
        box-shadow: 0 2px 4px rgba(31, 77, 220, 0.2);
      }

      .keyword-chip.neg {
        border-color: #fca5a5;
        color: #b91c1c;
        background: #fef2f2;
      }
      .keyword-chip.neg:hover {
        background: #fecaca;
      }
      .keyword-chip.neg.active {
        background: #ef4444;
        color: #fff;
        border-color: #ef4444;
      }

      .history-view {
        margin-top: 15px;
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 20px;
        flex: 1;
        overflow-y: auto;
      }
      .history-item {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 12px;
        background: #f9fafb;
        border-radius: 8px;
        margin-bottom: 8px;
        font-size: 13.5px;
        border-left: 4px solid transparent;
        transition: 0.2s;
      }
      .history-item.checked {
        border-left-color: #1f4ddc;
        background: #eff6ff;
      }
      .history-chk {
        margin-top: 4px;
        transform: scale(1.3);
        cursor: pointer;
        accent-color: #1f4ddc;
        margin-right: 10px;
      }
      .history-actions {
        display: flex;
        gap: 6px;
        flex-shrink: 0;
      }

      #toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: #fff;
        padding: 12px 25px;
        border-radius: 30px;
        font-size: 13px;
        font-weight: 600;
        opacity: 0;
        transition: 0.3s;
        pointer-events: none;
        z-index: 3000;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div id="toast">ì•Œë¦¼</div>
    <div class="topbar">
      í–‰ë™íŠ¹ì„± ë° ì¢…í•©ì˜ê²¬
    </div>

    <div class="container">
      <section class="left">
        <div class="section-header">
          <div class="section-title">í•™ìƒ ì„ íƒ ë° ê¸°ë¡ êµ¬ì„±</div>
          <button class="btn accent" onclick="openModal()">
            ğŸ“… ëˆ„ê°€ê¸°ë¡ (êµì‚¬ ì‘ì„±ìš©)
          </button>
        </div>

        <div
          style="
            background: #eef2ff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #c7d2fe;
            margin-bottom: 10px;
            flex-shrink: 0;
          "
        >
          <strong
            style="color: #3730a3; display: flex; align-items: center; gap: 8px"
          >
            ğŸ§‘â€ğŸ“ í•™ìƒëª…: ì´í˜„íƒœ
            <span style="font-size: 12px; color: #555">(ê³ ì •)</span>
          </strong>
        </div>

        <div
          style="
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
            margin-top: 5px;
          "
        >
          <div class="section-header" style="flex-shrink: 0">
            <label class="section-title">ìƒì„± ëŒ€ê¸° ì¤‘ì¸ í™œë™ (ì„ íƒë¨)</label>
          </div>
          <textarea
            id="rawDataDisplay"
            class="textarea"
            readonly
            placeholder="[ëˆ„ê°€ê¸°ë¡]ì—ì„œ í•­ëª©ì„ ì²´í¬í•˜ë©´ ìš”ì•½ì´ í‘œì‹œë©ë‹ˆë‹¤."
            style="
              background: #f9fafb;
              color: #555;
              flex: 1;
              margin-bottom: 15px;
              line-height: 1.6;
            "
          ></textarea>
        </div>

        <button
          class="btn primary"
          style="height: 48px; font-size: 15px; flex-shrink: 0"
          onclick="generateDraftAI()"
        >
          âœ¨ AI ì¢…í•©ì˜ê²¬ ì´ˆì•ˆ ìƒì„±
        </button>

        <div
          style="
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
            margin-top: 15px;
          "
        >
          <label
            class="section-title"
            style="margin-bottom: 8px; flex-shrink: 0"
            >AI ìƒì„± ì´ˆì•ˆ (ê²€í†  ë° ì§ì ‘ ì¶”ê°€)</label
          >
          <textarea
            id="tempDraft"
            class="textarea"
            style="
              background: #fdfbff;
              border-color: #c7d2fe;
              flex: 1;
              line-height: 1.6;
            "
            placeholder="AI ì´ˆì•ˆì´ ìƒì„±ë˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. ì„ ìƒë‹˜ì´ ì§ì ‘ ë§ë¶™ì´ê³  ì‹¶ì€ ë¬¸ì¥ì´ ìˆë‹¤ë©´ ììœ ë¡­ê²Œ ì¶”ê°€í•˜ì„¸ìš”."
          ></textarea>
          <button
            class="btn success"
            style="width: 100%; margin-top: 10px; flex-shrink: 0"
            onclick="moveToFinal()"
          >
            ìš°ì¸¡ ìµœì¢… ê¸°ì¬ë€ìœ¼ë¡œ ì „ì†¡ â”
          </button>
        </div>
      </section>

      <section class="right">
        <div class="section-header" style="margin-bottom: 15px">
          <div class="section-title">NEIS ê¸°ì¬ ìµœì¢… ë‚´ìš©</div>
          <div style="display: flex; gap: 8px">
            <button class="btn danger" onclick="clearFinal()">
              ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ
            </button>
            <button
              class="btn"
              style="background: #8b5cf6; color: white; border-color: #7c3aed"
              onclick="checkAndUpgradeIntegrity()"
            >
              ğŸª„ ì „ì²´ AI ë‹¤ë“¬ê¸° (ë¹ˆë„ ê°•í™” ë° ì§ì ‘ ì‘ì„± ë³´ì¡´)
            </button>
            <button class="btn success" onclick="finalApply()">
              ğŸ’¾ ì ìš©í•˜ê¸°
            </button>
          </div>
        </div>

        <div
          style="
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 15px;
            min-height: 0;
          "
        >
          <div
            id="finalPreview"
            class="preview-box"
            contenteditable="true"
            oninput="updateByte()"
          ></div>

          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              flex-shrink: 0;
            "
          >
            <div class="counter" style="margin-top: 0">
              ê¸€ììˆ˜: <span id="charNum" style="font-weight: 700">0</span>ì
              &nbsp;|&nbsp; ì‹¤ì‹œê°„ ìš©ëŸ‰:
              <span id="byteNum" style="color: #1f4ddc; font-weight: 700"
                >0</span
              >
              / 1500 Byte
            </div>
          </div>

          <div class="info-layer" id="infoLayer">
            <span
              style="
                font-weight: 700;
                display: block;
                margin-bottom: 8px;
                color: #374151;
              "
              >ğŸ“‹ ìƒì„± ì´ë ¥ ìš”ì•½ (ì¹´ë“œë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ í™•ì¸ ë° ì‚­ì œ)</span
            >
            <div
              id="infoContentContainer"
              style="color: #9ca3af; font-size: 13px"
            >
              ìƒì„±ëœ ë¬¸ì¥ì— ëŒ€í•œ ì •ë³´ê°€ ì´ê³³ì— ì•„ì½”ë””ì–¸ í˜•íƒœë¡œ ëˆ„ì ë©ë‹ˆë‹¤.
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="logModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span style="font-size: 18px; font-weight: 700; color: #374151"
            >ğŸ“… í•™ìƒë³„ ëˆ„ê°€ ê¸°ë¡ ê´€ë¦¬</span
          >
          <button class="btn" onclick="closeModal()">ë‹«ê¸° (ìë™ ì €ì¥ë¨)</button>
        </div>
        <div class="modal-body">
          <div class="student-list" id="modalStudentList"></div>

          <div class="log-entry">
            <h3
              id="modalStudentTitle"
              style="
                margin-top: 0;
                margin-bottom: 15px;
                color: #1f4ddc;
                font-size: 20px;
              "
            >
              [ì´í˜„íƒœ] ëˆ„ê°€ê¸°ë¡ ì…ë ¥
            </h3>

            <div
              style="
                background: #f8fafc;
                padding: 20px;
                border-radius: 12px;
                border: 1px solid #e5e7eb;
                margin-bottom: 20px;
              "
            >
              <div
                style="
                  margin-bottom: 15px;
                  font-weight: 600;
                  display: flex;
                  align-items: center;
                  gap: 10px;
                "
              >
                ê¸°ë¡ ì¼ì:
                <input
                  type="date"
                  id="logDate"
                  class="input"
                  style="width: 150px"
                />
              </div>

              <div id="inputRowsContainer"></div>

              <div
                style="
                  margin-top: 15px;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <button class="btn sm" onclick="addRow()">
                  + í™œë™ í•­ëª© ì¶”ê°€
                </button>
                <button class="btn success" onclick="applyAndReset()">
                  âœ… í˜„ì¬ í•­ëª© ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
                </button>
              </div>
            </div>

            <div
              style="
                background: #fff;
                padding: 15px;
                border: 1px solid #e5e7eb;
                border-radius: 12px;
                margin-bottom: 20px;
              "
            >
              <div
                class="section-title"
                style="margin-bottom: 10px; font-size: 14px"
              >
                ğŸ“ í•™ê¸°ë§ ì¢…í•© ì˜ê²¬ (ì„ íƒ ì‚¬í•­)
              </div>
              <textarea
                id="comprehensiveInput"
                class="textarea"
                style="height: 60px"
                placeholder="í•™ìƒì˜ ì„±í–¥ì„ ììœ ë¡­ê²Œ ì‘ì„±í•˜ì„¸ìš”. ('ë§ˆìŒì— ë“ ë‹¤', 'ë…¸ë ¥í–ˆë‹¤' ë“±ìœ¼ë¡œ ì¨ë„ AIê°€ '~í•¨', '~ë“¦'ìœ¼ë¡œ ì™„ë²½íˆ ì •ì œí•´ ì¤ë‹ˆë‹¤.)"
                oninput="saveComprehensive()"
              ></textarea>
            </div>

            <div
              style="
                display: flex;
                flex-direction: column;
                flex: 1;
                min-height: 0;
              "
            >
              <div
                class="section-title"
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <span>ğŸ•’ ì €ì¥ëœ ëˆ„ê°€ê¸°ë¡ ëª©ë¡ (ì²´í¬ëœ í•­ëª©ë§Œ ìƒì„±)</span>
                <div>
                  <button class="btn sm" onclick="checkAllModal(true)">
                    ì „ì²´ ì„ íƒ
                  </button>
                  <button class="btn sm" onclick="checkAllModal(false)">
                    ì „ì²´ í•´ì œ
                  </button>
                </div>
              </div>
              <div class="history-view" id="historyGroupView">
                ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* =========================================================================
         [ë¬¸ì¥ ì¶”ì¶œ ë° ë¶„í•´ ë„êµ¬] 
      ========================================================================== */
      function getSentences(text) {
        if (!text) return [];
        let matches = text.replace(/\n/g, " ").match(/[^.!?]+[.!?]*/g);
        return matches ? matches.map((s) => s.trim()).filter((s) => s) : [];
      }

      /* =========================================================================
         [ë…ë¦½ í´ë˜ìŠ¤ V8.0] ìì—°ì–´ ë§ì¶¤ë²•/ì¢…ê²°ì–´ë¯¸ ë³€í™˜ ì—”ì§„ (Korean Grammar Engine)
         - ì—…ë°ì´íŠ¸: ì–´ì ˆ ë‹¨ìœ„ ìŠ¤ìº” ë„ì…! ë§ˆì¹¨í‘œ ì—†ì´ ì—¬ëŸ¬ ë¬¸ì¥ì„ ì´ì–´ ì¨ë„ ì™„ë²½í•˜ê²Œ ì¡ì•„ëƒ…ë‹ˆë‹¤.
      ========================================================================== */
      class GrammarEngine {
        constructor() {
          this.irregularDict = {
            ë“ ë‹¤: "ë“¦",
            ë“¤ë‹¤: "ë“¦",
            ë“¤ì—ˆë‹¤: "ë“¦",
            ë§Œë“ ë‹¤: "ë§Œë“¦",
            ë§Œë“¤ë‹¤: "ë§Œë“¦",
            ë§Œë“¤ì—ˆë‹¤: "ë§Œë“¦",
            ì´ëˆë‹¤: "ì´ë",
            ì´ëŒë‹¤: "ì´ë",
            ì´ëŒì—ˆë‹¤: "ì´ë",
            ë² í‘¼ë‹¤: "ë² í’‚",
            ë² í’€ë‹¤: "ë² í’‚",
            ë² í’€ì—ˆë‹¤: "ë² í’‚",
            ë•ëŠ”ë‹¤: "ë„ì›€",
            ë•ë‹¤: "ë„ì›€",
            ë„ì™”ë‹¤: "ë„ì›€",
            ì–´ë µë‹¤: "ì–´ë ¤ì›€",
            ì–´ë ¤ì› ë‹¤: "ì–´ë ¤ì›€",
            ì‰½ë‹¤: "ì‰¬ì›€",
            ì‰¬ì› ë‹¤: "ì‰¬ì›€",
            ì¦ê²ë‹¤: "ì¦ê±°ì›€",
            ì¦ê±°ì› ë‹¤: "ì¦ê±°ì›€",
            ì•„ë¦„ë‹µë‹¤: "ì•„ë¦„ë‹¤ì›€",
            ì•„ë¦„ë‹¤ì› ë‹¤: "ì•„ë¦„ë‹¤ì›€",
            ë¬´ê²ë‹¤: "ë¬´ê±°ì›€",
            ë¬´ê±°ì› ë‹¤: "ë¬´ê±°ì›€",
            ê°€ë³ë‹¤: "ê°€ë²¼ì›€",
            ê°€ë²¼ì› ë‹¤: "ê°€ë²¼ì›€",
            ìƒˆë¡­ë‹¤: "ìƒˆë¡œì›€",
            ìƒˆë¡œì› ë‹¤: "ìƒˆë¡œì›€",
            ê¸°ì˜ë‹¤: "ê¸°ì¨",
            ê¸°ë»¤ë‹¤: "ê¸°ì¨",
            ìŠ¬í”„ë‹¤: "ìŠ¬í””",
            ìŠ¬íë‹¤: "ìŠ¬í””",
            ê·¸ë ‡ë‹¤: "ê·¸ëŸ¬í•¨",
            ê·¸ë¬ë‹¤: "ê·¸ëŸ¬í•¨",
            ë“£ë‹¤: "ë“¤ìŒ",
            ë“£ëŠ”ë‹¤: "ë“¤ìŒ",
            ë“¤ì—ˆë‹¤: "ë“¤ìŒ",
            ë¬»ë‹¤: "ë¬¼ìŒ",
            ë¬»ëŠ”ë‹¤: "ë¬¼ìŒ",
            ë¬¼ì—ˆë‹¤: "ë¬¼ìŒ",
            ê±·ë‹¤: "ê±¸ìŒ",
            ê±·ëŠ”ë‹¤: "ê±¸ìŒ",
            ê±¸ì—ˆë‹¤: "ê±¸ìŒ",
            ê¹¨ë‹«ë‹¤: "ê¹¨ë‹¬ìŒ",
            ê¹¨ë‹«ëŠ”ë‹¤: "ê¹¨ë‹¬ìŒ",
            ê¹¨ë‹¬ì•˜ë‹¤: "ê¹¨ë‹¬ìŒ",
            ì§“ë‹¤: "ì§€ìŒ",
            ì§“ëŠ”ë‹¤: "ì§€ìŒ",
            ì§€ì—ˆë‹¤: "ì§€ìŒ",
            ë‚«ë‹¤: "ë‚˜ìŒ",
            ë‚˜ì•˜ë‹¤: "ë‚˜ìŒ",
            ì‡ë‹¤: "ì´ìŒ",
            ì‡ëŠ”ë‹¤: "ì´ìŒ",
            ì´ì—ˆë‹¤: "ì´ìŒ",
            ê¸‹ë‹¤: "ê·¸ìŒ",
            ê·¸ì—ˆë‹¤: "ê·¸ìŒ",
          };

          this.patternDict = [
            [/ê¹ë‹¤$/, "ê¹Œì›€"],
            [/ê¹Œì› ë‹¤$/, "ê¹Œì› ìŒ"],
            [/ê²¹ë‹¤$/, "ê²¨ì›€"],
            [/ê²¨ì› ë‹¤$/, "ê²¨ì› ìŒ"],
            [/ëë‹¤$/, "ë¼ì›€"],
            [/ë¼ì› ë‹¤$/, "ë¼ì› ìŒ"],
            [/ê°‘ë‹¤$/, "ê°€ì›€"],
            [/ê°€ì› ë‹¤$/, "ê°€ì› ìŒ"],
            [/ë§™ë‹¤$/, "ë§ˆì›€"],
            [/ë§ˆì› ë‹¤$/, "ë§ˆì› ìŒ"],
            [/ìŠµë‹¤$/, "ìŠ¤ì›€"],
            [/ìŠ¤ì› ë‹¤$/, "ìŠ¤ì› ìŒ"],
            [/ë¡­ë‹¤$/, "ë¡œì›€"],
            [/ë¡œì› ë‹¤$/, "ë¡œì› ìŒ"],
            [/ëŸ½ë‹¤$/, "ëŸ¬ì›€"],
            [/ëŸ¬ì› ë‹¤$/, "ëŸ¬ì› ìŒ"],
            [/ë‹µë‹¤$/, "ë‹¤ì›€"],
            [/ë‹¤ì› ë‹¤$/, "ë‹¤ì› ìŒ"],
            [/ê²ë‹¤$/, "ê±°ì›€"],
            [/ê±°ì› ë‹¤$/, "ê±°ì› ìŒ"],
            [/ì–´ë‘¡ë‹¤$/, "ì–´ë‘ì›€"],
            [/ì–´ë‘ì› ë‹¤$/, "ì–´ë‘ì› ìŒ"],
            [/ê»ë‹¤$/, "êº¼ì›€"],
            [/êº¼ì› ë‹¤$/, "êº¼ì› ìŒ"],
            [/ë‚©ë‹¤$/, "ë‚˜ì›€"],
            [/ë‚˜ì› ë‹¤$/, "ë‚˜ì› ìŒ"],
            [/ì—½ë‹¤$/, "ì—¬ì›€"],
            [/ì—¬ì› ë‹¤$/, "ì—¬ì› ìŒ"],
            [/ë¥ë‹¤$/, "ë”ì›€"],
            [/ë”ì› ë‹¤$/, "ë”ì› ìŒ"],
            [/ë ‡ë‹¤$/, "ëŸ¬í•¨"],
            [/ë¬ë‹¤$/, "ë¬ìŒ"],
            [/ë–»ë‹¤$/, "ë– í•¨"],
            [/ë• ë‹¤$/, "ë• ìŒ"],
            [/ë—ë‹¤$/, "ë¼í•¨"],
            [/ê°›ë‹¤$/, "ê°€í•¨"],
            [/ì–—ë‹¤$/, "ì•¼í•¨"],
            [/ë§£ë‹¤$/, "ë§ˆí•¨"],
            [/ê³ ë‹¤$/, "ê³ ì„"],
            [/ìˆ˜ë‹¤$/, "ìˆ˜ì„"],
            [/ì¬ë‹¤$/, "ì¬ì„"],
            [/í‘œë‹¤$/, "í‘œì„"],
            [/ì‘¤ë‹¤$/, "ì‘¤ì„"],
            [/ê¸°ë‹¤$/, "ê¸°ì„"],
            [/íšŒë‹¤$/, "íšŒì„"],
            [/ë‘ë‹¤$/, "ë‘ì„"],
            [/ì•„ë‹ˆë‹¤$/, "ì•„ë‹˜"],
            [/ì•„ë‹ˆì—ˆë‹¤$/, "ì•„ë…”ìŒ"],
            [/í•˜ì˜€ë‹¤$/, "í•¨"],
            [/í–ˆë‹¤$/, "í•¨"],
            [/í•œë‹¤$/, "í•¨"],
            [/í•˜ë‹¤$/, "í•¨"],
            [/ì´ë‹¤$/, "ì„"],
            [/ì´ì—ˆë‹¤$/, "ì„"],
            [/ì˜€ë‹¤$/, "ì„"],
            [/ë³´ì˜€ë‹¤$/, "ë³´ì„"],
            [/ë³´ì¸ë‹¤$/, "ë³´ì„"],
            [/ë³´ì´ë‹¤$/, "ë³´ì„"],
            [/ë˜ì—ˆë‹¤$/, "ë¨"],
            [/ëœë‹¤$/, "ë¨"],
            [/ë˜ë‹¤$/, "ë¨"],
            [/ì£¼ì—ˆë‹¤$/, "ì¤Œ"],
            [/ì¤€ë‹¤$/, "ì¤Œ"],
            [/ì£¼ë‹¤$/, "ì¤Œ"],
            [/ë°›ì•˜ë‹¤$/, "ë°›ìŒ"],
            [/ë°›ëŠ”ë‹¤$/, "ë°›ìŒ"],
            [/ë°›ë‹¤$/, "ë°›ìŒ"],
            [/ê°€ì¡Œë‹¤$/, "ê°€ì§"],
            [/ê°€ì§„ë‹¤$/, "ê°€ì§"],
            [/ê°€ì§€ë‹¤$/, "ê°€ì§"],
            [/ëŠê¼ˆë‹¤$/, "ëŠë‚Œ"],
            [/ëŠë‚€ë‹¤$/, "ëŠë‚Œ"],
            [/ëŠë¼ë‹¤$/, "ëŠë‚Œ"],
            [/ë§ë‹¤$/, "ë§ìŒ"],
            [/ì ë‹¤$/, "ì ìŒ"],
            [/í¬ë‹¤$/, "í¼"],
            [/ì‘ë‹¤$/, "ì‘ìŒ"],
            [/ìˆë‹¤$/, "ìˆìŒ"],
            [/ì—†ë‹¤$/, "ì—†ìŒ"],
            [/ê°™ë‹¤$/, "ê°™ìŒ"],
            [/ì•Šë‹¤$/, "ì•ŠìŒ"],
            [/ëŠ”ë‹¤$/, "ìŒ"],
            [/ì€ë‹¤$/, "ìŒ"],
            [/ì—ˆë‹¤$/, "ì—ˆìŒ"],
            [/ì•˜ë‹¤$/, "ì•˜ìŒ"],
            [/ê² ë‹¤$/, "ê² ìŒ"],
          ];
        }

        convert(text) {
          if (!text) return "";
          let sentences = text.match(/[^.!?]+[.!?]*/g) || [text];

          let converted = sentences.map((sentence) => {
            let s = sentence.trim();
            if (!s) return "";

            let puncMatch = s.match(/[.!?]+$/);
            let sentencePunc = puncMatch ? puncMatch[0] : "";
            let body = s.replace(/[.!?]+$/, "");

            // ë¬¸ì¥ì˜ ëª¨ë“  ì–´ì ˆ(ë‹¨ì–´)ì„ ìŠ¤ìº”í•©ë‹ˆë‹¤. (ì¤‘ê°„ì— ë§ˆì¹¨í‘œ ì—†ì´ ì´ì–´ ì“´ ë¬¸ì¥ ë°©ì–´)
            let words = body.split(/\s+/);

            for (let i = 0; i < words.length; i++) {
              let word = words[i];
              let wordPuncMatch = word.match(/[.,!?]+$/);
              let wordPunc = wordPuncMatch ? wordPuncMatch[0] : "";
              let cleanWord = word.replace(/[.,!?]+$/, "");

              let isConverted = false;

              if (this.irregularDict[cleanWord]) {
                cleanWord = this.irregularDict[cleanWord];
                isConverted = true;
              } else {
                for (let [pattern, rep] of this.patternDict) {
                  if (pattern.test(cleanWord)) {
                    cleanWord = cleanWord.replace(pattern, rep);
                    isConverted = true;
                    break;
                  }
                }
              }

              // ì¼ë°˜ëª…ì‚¬ íŒŒê´´ë¥¼ ë§‰ê¸° ìœ„í•´ ìœ ë‹ˆì½”ë“œ ì—°ì‚°ì€ ë§¨ ë§ˆì§€ë§‰ ë‹¨ì–´ì—ë§Œ ì ìš©
              if (
                !isConverted &&
                i === words.length - 1 &&
                cleanWord.endsWith("ë‹¤")
              ) {
                const lastChar = cleanWord.charCodeAt(cleanWord.length - 2);
                if (lastChar >= 0xac00 && lastChar <= 0xd7a3) {
                  const jongseong = (lastChar - 0xac00) % 28;
                  if (jongseong === 0) {
                    cleanWord =
                      cleanWord.slice(0, -2) +
                      String.fromCharCode(lastChar + 16);
                  } else if (jongseong === 8) {
                    cleanWord =
                      cleanWord.slice(0, -2) +
                      String.fromCharCode(lastChar + 2);
                  } else if (jongseong === 4) {
                    cleanWord =
                      cleanWord.slice(0, -2) +
                      String.fromCharCode(lastChar + 12);
                  } else {
                    cleanWord = cleanWord.slice(0, -1) + "ìŒ";
                  }
                  isConverted = true;
                }
              }

              // ì¤‘ê°„ì— ë³€í™˜ëœ ë™ì‚¬ê°€ ìˆë‹¤ë©´ ë§ˆì¹¨í‘œë¥¼ ê°•ì œë¡œ ì‚½ì…í•´ì¤ë‹ˆë‹¤ (ë„ì–´ì“°ê¸° ë­‰ê°œì§ ë°©ì§€)
              if (isConverted && i < words.length - 1 && !wordPunc) {
                wordPunc = ".";
              }

              words[i] = cleanWord + wordPunc;
            }

            let finalSentence = words.join(" ");
            if (!sentencePunc) sentencePunc = ".";
            let result = finalSentence + sentencePunc;
            return result.replace(/\.{2,}/g, "."); // ì¤‘ë³µ ë§ˆì¹¨í‘œ ì •ë¦¬
          });

          return converted
            .join(" ")
            .replace(/\.{2,}/g, ".")
            .replace(/\s+\./g, ".")
            .trim();
        }
      }

      const grammarEngine = new GrammarEngine();

      /* --- ì´í•˜ DB ë° UI ë¡œì§ --- */
      const currentStudent = "ì´í˜„íƒœ";
      const cats = [
        "ì„±ê²©",
        "êµìš°ê´€ê³„",
        "ìƒí™œíƒœë„",
        "ì ì„±Â·í™œë™",
        "ì§„ë¡œíƒœë„",
        "í•™ì—…íƒœë„",
        "ê¸°íƒ€",
      ];
      const levels = ["ë§¤ìš°ìš°ìˆ˜", "ìš°ìˆ˜", "ë³´í†µ", "ë…¸ë ¥"];

      const KEYWORD_DB = {
        ì„±ê²©: [
          {
            word: "ê¸ì •ì ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë§¤ì‚¬ ê¸ì •ì ì¸ ë§ˆì¸ë“œë¡œ í•™ê¸‰ì˜ ì–´ë ¤ìš´ ìƒí™©ì„ ë°ê²Œ ì „í™˜ì‹œí‚¤ëŠ” íƒì›”í•œ ë§ˆì¸ë“œë¥¼ ì§€ë‹˜.",
              ìš°ìˆ˜: "ë°ê³  ëª…ë‘í•œ íƒœë„ë¡œ ì£¼ë³€ì— ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „íŒŒí•¨.",
              ë³´í†µ: "ìƒí™©ì„ ê¸ì •ì ìœ¼ë¡œ ë°”ë¼ë³´ë ¤ ë…¸ë ¥í•˜ë©° ì›ë§Œí•˜ê²Œ ìƒí™œí•¨.",
              ë…¸ë ¥: "ì–´ë ¤ì›€ ì•ì—ì„œë„ ê¸ì •ì ì¸ íƒœë„ë¥¼ ìƒì§€ ì•Šìœ¼ë ¤ ë§ˆì¸ë“œ ì»¨íŠ¸ë¡¤ì„ í•˜ë©° ì ì§„ì ìœ¼ë¡œ ì„±ì¥í•¨.",
            },
          },
          {
            word: "ì°¨ë¶„í•¨",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì–´ë–¤ ìƒí™©ì—ì„œë„ ë™ìš”í•˜ì§€ ì•Šê³  ì¹¨ì°©í•˜ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ì°¨ë¶„í•œ ì„±í’ˆìœ¼ë¡œ ë§¤ì‚¬ ì‹ ì¤‘í•˜ê²Œ ìƒê°í•˜ê³  í–‰ë™í•¨.",
              ë³´í†µ: "ëŒ€ì²´ë¡œ ì°¨ë¶„í•œ íƒœë„ë¥¼ ìœ ì§€í•˜ë©° ê³¼ì œë¥¼ ìˆ˜í–‰í•¨.",
              ë…¸ë ¥: "ê¸‰í•œ ìƒí™©ì—ì„œ ì¹¨ì°©í•¨ì„ ìœ ì§€í•˜ë ¤ ë…¸ë ¥í•˜ë©° ìê¸° ì¡°ì ˆ ëŠ¥ë ¥ì„ ê¸°ë¥´ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì±…ì„ê°",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì´ ë§¡ì€ ì—­í• ì— ëŒ€í•œ ì±…ì„ê°ì´ íˆ¬ì² í•˜ì—¬ ëê¹Œì§€ ì™„ìˆ˜í•´ë‚´ëŠ” ì§‘ë…ì´ ê°•í•¨.",
              ìš°ìˆ˜: "ìì‹ ì˜ ì„ë¬´ë¥¼ ì„±ì‹¤í•˜ê²Œ ìˆ˜í–‰í•˜ë ¤ëŠ” ì±…ì„ê°ì´ ê°•í•¨.",
              ë³´í†µ: "ì£¼ì–´ì§„ ì—­í• ì— ëŒ€í•´ ëê¹Œì§€ ì±…ì„ì„ ì§€ê³  ìˆ˜í–‰í•¨.",
              ë…¸ë ¥: "ì±…ì„ê°ì„ ê¸°ë¥´ê¸° ìœ„í•´ ìŠ¤ìŠ¤ë¡œ ê³„íšì„ ì„¸ìš°ê³  ì‹¤ì²œí•˜ëŠ” ëª¨ìŠµì„ ë³´ì„.",
            },
          },
          {
            word: "ì†”ì§í•¨",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì˜ ê°ì •ê³¼ ìƒê°ì„ ê°€ê° ì—†ì´ ì†”ì§í•˜ê³  ì •ì¤‘í•˜ê²Œ í‘œí˜„í•¨.",
              ìš°ìˆ˜: "ê±°ì§“ ì—†ì´ ì†”ì§í•˜ê²Œ í–‰ë™í•˜ì—¬ ì¹œêµ¬ë“¤ì˜ ì‹ ë¢°ë¥¼ ì–»ìŒ.",
              ë³´í†µ: "ìì‹ ì˜ ì˜ê²¬ì„ ëŒ€ì²´ë¡œ ì†”ì§í•˜ê²Œ í‘œí˜„í•¨.",
              ë…¸ë ¥: "ìì‹ ì˜ ìƒê°ì„ ì ì ˆí•œ ë°©ì‹ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•´ ê¾¸ì¤€íˆ ì—°ìŠµí•˜ë©° ì†Œí†µ ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚´.",
            },
          },
          {
            word: "ìœ ë¨¸",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì¬ì¹˜ ìˆëŠ” ìœ ë¨¸ ê°ê°ìœ¼ë¡œ í•™ê¸‰ì˜ ê°ˆë“± ìƒí™©ì„ ìœ ì—°í•˜ê²Œ ë„˜ê¸°ëŠ” ëŠ¥ë ¥ì´ ë‹ë³´ì„.",
              ìš°ìˆ˜: "ì ì ˆí•œ ìœ ë¨¸ë¡œ ì¹œêµ¬ë“¤ì„ ì¦ê²ê²Œ í•˜ë©° ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ì„ í•¨.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ê³¼ ëŒ€í™”í•˜ë©° ì¦ê±°ìš´ ë¶„ìœ„ê¸°ë¥¼ í˜•ì„±í•¨.",
              ë…¸ë ¥: "ë•Œì™€ ì¥ì†Œì— ë§ëŠ” ì–¸ì–´ ìŠµê´€ì„ ê¸°ë¥´ë©° ê¸ì •ì ì¸ êµìš°ê´€ê³„ë¥¼ í˜•ì„±í•˜ë ¤ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "ì˜¨ìˆœí•¨",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì„±í’ˆì´ ì˜¨ìˆœí•˜ê³  ë‹¤ì •ë‹¤ê°í•˜ì—¬ ì¹œêµ¬ë“¤ ì‚¬ì´ì—ì„œ ì¸ê¸°ê°€ ë§ìŒ.",
              ìš°ìˆ˜: "ì¹œêµ¬ë“¤ê³¼ ë‹¤íˆ¬ì§€ ì•Šê³  ì˜¨í™”í•˜ê²Œ ì§€ëƒ„.",
              ë³´í†µ: "ëª¨ë‚˜ì§€ ì•Šì€ ì„±ê²©ìœ¼ë¡œ ì›ë§Œí•œ êµìš°ê´€ê³„ë¥¼ ìœ ì§€í•¨.",
              ë…¸ë ¥: "ìì‹ ì˜ ì˜ì‚¬ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ë©° ìì¡´ê°ì„ ë†’ì—¬ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ìì‹ ê°",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë§¤ì‚¬ ìì‹ ê° ë„˜ì¹˜ëŠ” íƒœë„ë¡œ ìƒˆë¡œìš´ ê³¼ì œì— ì£¼ë„ì ìœ¼ë¡œ ë„ì „í•¨.",
              ìš°ìˆ˜: "ìì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ê³  ì ê·¹ì ìœ¼ë¡œ í™œë™ì— ì°¸ì—¬í•¨.",
              ë³´í†µ: "ì£¼ì–´ì§„ ê³¼ì œë¥¼ ìˆ˜í–‰í•  ë•Œ ìì‹ ê°ì„ ê°€ì§€ê³  ì„í•¨.",
              ë…¸ë ¥: "ë°œí‘œë‚˜ í™œë™ ì‹œ ìì‹ ê°ì„ ê°–ê³  ì°¸ì—¬í•˜ê¸° ìœ„í•´ ê¾¸ì¤€íˆ ì—°ìŠµí•˜ë©° ë‚˜ì•„ì§€ëŠ” ëª¨ìŠµì„ ë³´ì„.",
            },
          },
          {
            word: "ë„ì „",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì–´ë ¤ìš´ ê³¼ì œì—ë„ êµ´í•˜ì§€ ì•Šê³  ëŠì„ì—†ì´ ë„ì „í•˜ëŠ” ëˆê¸°ê°€ ë‹ë³´ì„.",
              ìš°ìˆ˜: "ìƒˆë¡œìš´ ë¶„ì•¼ì— í¥ë¯¸ë¥¼ ê°€ì§€ê³  ì£¼ì € ì—†ì´ ë„ì „í•˜ëŠ” ê²ƒì„ ì¦ê¹€.",
              ë³´í†µ: "ìƒˆë¡œìš´ í™œë™ì— ëŒ€í•´ ê´€ì‹¬ì„ ë³´ì´ê³  ê¸ì •ì ìœ¼ë¡œ ì°¸ì—¬í•¨.",
              ë…¸ë ¥: "ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ìì‹ ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë„ì „í•˜ëŠ” ìš©ê¸° ìˆëŠ” ëª¨ìŠµì„ ë³´ì—¬ì¤Œ.",
            },
          },
          {
            word: "ì˜ˆì˜",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì›ƒì–´ë¥¸ì„ ê³µê²½í•˜ê³  ì¹œêµ¬ë¥¼ ì¡´ì¤‘í•˜ëŠ” ì˜ˆì˜ ë°”ë¥¸ íƒœë„ê°€ ëª¸ì— ë°°ì–´ ìˆìŒ.",
              ìš°ìˆ˜: "ì¸ì‚¬ë¥¼ ì˜í•˜ê³  ì˜ˆì ˆì„ ì˜ ì§€ì¼œ íƒ€ì˜ ëª¨ë²”ì´ ë¨.",
              ë³´í†µ: "ê¸°ë³¸ì ì¸ ì˜ˆì ˆì„ ì§€í‚¤ë©° í•™êµìƒí™œì„ í•¨.",
              ë…¸ë ¥: "ìƒí™©ì— ë§ëŠ” ì˜ˆì ˆì„ ìµíˆê³  ì‹¤ì²œí•˜ë ¤ ë…¸ë ¥í•˜ë©° ë°”ë¥¸ ì¸ì„±ì„ ê¸¸ëŸ¬ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì¸ë‚´ì‹¬",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "í˜ë“  ìƒí™©ì—ì„œë„ í¬ê¸°í•˜ì§€ ì•Šê³  ëê¹Œì§€ ê²¬ëŒë‚´ëŠ” ì¸ë‚´ì‹¬ì´ ë§¤ìš° ë›°ì–´ë‚¨.",
              ìš°ìˆ˜: "ê³¼ì œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ëˆê¸° ìˆê²Œ ë…¸ë ¥í•˜ëŠ” ëª¨ìŠµì„ ë³´ì„.",
              ë³´í†µ: "ì£¼ì–´ì§„ ì¼ì„ ë§ˆì¹  ë•Œê¹Œì§€ ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ì°¸ì—¬í•¨.",
              ë…¸ë ¥: "ë‹¤ì†Œ ì‹œê°„ì´ ê±¸ë¦¬ë”ë¼ë„ ëˆê¸° ìˆê²Œ ê³¼ì œì— ì§‘ì¤‘í•˜ë©° ì¸ë‚´ì‹¬ì„ ê¸°ë¥´ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì†Œê·¹ì (ì„±ì¥)",
            isNeg: true,
            s: {
              ë§¤ìš°ìš°ìˆ˜: "",
              ìš°ìˆ˜: "",
              ë³´í†µ: "ë‹¤ì†Œ ì¡°ìš©í•œ í¸ì´ë‚˜ ë‚´ë©´ì˜ ê¹Šì´ê°€ ìˆìœ¼ë©° ë§¡ì€ ì¼ì„ ë¬µë¬µíˆ ìˆ˜í–‰í•¨.",
              ë…¸ë ¥: "ìì‹ ê°ì„ ê°–ê³  ìì‹ ì˜ ì˜ê²¬ì„ ì ê·¹ì ìœ¼ë¡œ í‘œí˜„í•˜ë ¤ ë…¸ë ¥í•˜ë©° ì ì°¨ í™œë°œí•œ ëª¨ìŠµìœ¼ë¡œ ë³€í™”í•˜ê³  ìˆìŒ.",
            },
          },
        ],
        êµìš°ê´€ê³„: [
          {
            word: "ë¦¬ë”ì‹­",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "íƒì›”í•œ ë¦¬ë”ì‹­ìœ¼ë¡œ ì¹œêµ¬ë“¤ì˜ ì˜ê²¬ì„ ì¡°ìœ¨í•˜ê³  í•™ê¸‰ì„ ì˜¬ë°”ë¥¸ ë°©í–¥ìœ¼ë¡œ ì´ë„ëŠ” í¬ìš©ë ¥ì„ ê°–ì¶¤.",
              ìš°ìˆ˜: "ì¹œêµ¬ë“¤ì„ ì˜ í†µì†”í•˜ë©° ëª¨ë‘  í™œë™ì—ì„œ ë¦¬ë” ì—­í• ì„ í›Œë¥­íˆ ìˆ˜í–‰í•¨.",
              ë³´í†µ: "í•„ìš”ì‹œ ì¹œêµ¬ë“¤ì„ ì´ë„ëŠ” ì±…ì„ê° ìˆëŠ” ëª¨ìŠµì„ ë³´ì„.",
              ë…¸ë ¥: "ì¹œêµ¬ë“¤ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ê³  ìˆ˜ìš©í•˜ë©° ìì‹ ë§Œì˜ ë¶€ë“œëŸ¬ìš´ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ë ¤ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "ë°°ë ¤",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì¹œêµ¬ì˜ ì…ì¥ì„ ë¨¼ì € ìƒê°í•˜ê³  ì§„ì‹¬ìœ¼ë¡œ ë°°ë ¤í•˜ëŠ” ë”°ëœ»í•œ ë§ˆìŒì”¨ë¥¼ ì§€ë‹˜.",
              ìš°ìˆ˜: "ì–´ë ¤ì›€ì— ì²˜í•œ ì¹œêµ¬ë¥¼ ê¸°êº¼ì´ ë„ì™€ì£¼ëŠ” ì´íƒ€ì‹¬ì´ ë‹ë³´ì„.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ì—ê²Œ ì¹œì ˆí•˜ê²Œ ëŒ€í•˜ë©° ë°°ë ¤í•˜ë ¤ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "íƒ€ì¸ì˜ ì…ì¥ì„ ì´í•´í•˜ê³  ë°°ë ¤í•˜ëŠ” íƒœë„ë¥¼ ê¸°ë¥´ë©° êµìš°ê´€ê³„ì˜ í­ì„ ë„“í˜€ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ê²½ì²­",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì¹œêµ¬ì˜ ì´ì•¼ê¸°ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ê²½ì²­í•˜ë©° ê¹Šì´ ê³µê°í•´ ì£¼ëŠ” íƒœë„ê°€ í›Œë¥­í•¨.",
              ìš°ìˆ˜: "ëŒ€í™”í•  ë•Œ ìƒëŒ€ë°©ì˜ ëˆˆì„ ë§ì¶”ê³  ê·€ ê¸°ìš¸ì—¬ ë“£ëŠ” ìì„¸ê°€ ë°”ë¦„.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ì˜ ì´ì•¼ê¸°ì— ì ì ˆíˆ ë°˜ì‘í•˜ë©° ê²½ì²­í•¨.",
              ë…¸ë ¥: "ìƒëŒ€ë°©ì˜ ë§ì´ ëë‚  ë•Œê¹Œì§€ ê·€ ê¸°ìš¸ì—¬ ë“£ëŠ” ê²½ì²­ì˜ ìì„¸ë¥¼ ê¾¸ì¤€íˆ í•¨ì–‘í•¨.",
            },
          },
          {
            word: "ì¤‘ì¬",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì¹œêµ¬ ê°„ì˜ ê°ˆë“± ë°œìƒ ì‹œ ê³µì •í•˜ê²Œ ì¤‘ì¬í•˜ì—¬ ì›ë§Œí•˜ê²Œ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ë‹¤íˆ¼ì´ ìˆì„ ë•Œ ì´ì„±ì ìœ¼ë¡œ ì¹œêµ¬ë“¤ì„ í™”í•´ì‹œí‚¤ë ¤ ë…¸ë ¥í•¨.",
              ë³´í†µ: "ê°ˆë“± ìƒí™©ì—ì„œ ì¹œêµ¬ë“¤ì„ ë§ë¦¬ê±°ë‚˜ ëŒ€í™”ë¡œ ìœ ë„í•¨.",
              ë…¸ë ¥: "ê°ˆë“± ìƒí™©ì„ í•©ë¦¬ì ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ë©° ì„±ìˆ™í•˜ê²Œ ëŒ€ì²˜í•˜ë ¤ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "í˜‘ë™",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ê³µë™ì˜ ëª©í‘œë¥¼ ìœ„í•´ ìì‹ ì˜ ì—­í• ì„ ë‹¤í•˜ë©° í›Œë¥­í•œ í˜‘ë™ì‹¬ê³¼ ì‹œë„ˆì§€ë¥¼ ë°œíœ˜í•¨.",
              ìš°ìˆ˜: "ëª¨ë‘  í™œë™ì—ì„œ ì¹œêµ¬ë“¤ê³¼ í˜‘ë ¥í•˜ì—¬ ê³¼ì œë¥¼ ì„±ì‹¤íˆ ìˆ˜í–‰í•¨.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ê³¼ ì–´ìš¸ë ¤ ë‹¨ì²´ í™œë™ì„ ìˆ˜í–‰í•˜ëŠ” ë° ê±°ë¶€ê°ì´ ì—†ìŒ.",
              ë…¸ë ¥: "ì¹œêµ¬ë“¤ê³¼ í˜‘ë ¥í•˜ì—¬ ê³¼ì œë¥¼ ì™„ì„±í•˜ëŠ” ê²½í—˜ì„ í†µí•´ í˜‘ë™ì˜ ê°€ì¹˜ë¥¼ ê¹¨ë‹¬ì•„ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì¸ê¸°/ì¹œí™”ë ¥",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìœ ë¨¸ì™€ ì¬ì¹˜ë¡œ ì£¼ë³€ì„ ì¦ê²ê²Œ í•˜ë©° ì²˜ìŒ ë§Œë‚œ ì¹œêµ¬ì™€ë„ ê¸ˆë°© ì¹œí•´ì§€ëŠ” ì¹œí™”ë ¥ì„ ì§€ë‹˜.",
              ìš°ìˆ˜: "ì›ë§Œí•œ ì„±ê²©ê³¼ ë‚¯ê°€ë¦¼ ì—†ëŠ” íƒœë„ë¡œ ì¹œêµ¬ë“¤ì—ê²Œ ë¨¼ì € ë‹¤ê°€ê°.",
              ë³´í†µ: "ìƒˆë¡œìš´ ì¹œêµ¬ë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” ë° í° ì–´ë ¤ì›€ì´ ì—†ìŒ.",
              ë…¸ë ¥: "ë¨¼ì € ë‹¤ê°€ê°€ëŠ” ìš©ê¸°ë¥¼ ê¸°ë¥´ë©° ë‹¤ì–‘í•œ ì¹œêµ¬ë“¤ê³¼ ê¸ì •ì ì¸ ê´€ê³„ë¥¼ ë§ºê¸° ìœ„í•´ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "ì†Œí†µ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì˜ ì˜ì‚¬ë¥¼ ëª…í™•íˆ ì „ë‹¬í•˜ê³  íƒ€ì¸ì˜ ì˜ê²¬ì„ ì¡´ì¤‘í•˜ëŠ” ì†Œí†µ ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ì¹œêµ¬ë“¤ê³¼ ëŒ€í™”ê°€ ì˜ í†µí•˜ê³  í•©ë¦¬ì ì¸ ì†Œí†µì´ ì›í™œí•¨.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ê³¼ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©° ìƒê°ì„ í™œë°œíˆ êµí™˜í•¨.",
              ë…¸ë ¥: "ìì‹ ì˜ ìƒê°ì„ ì¡°ë¦¬ ìˆê²Œ ë§í•˜ëŠ” ì—°ìŠµì„ í†µí•´ ì˜ì‚¬ì†Œí†µ ì—­ëŸ‰ì„ ë°œì „ì‹œí‚¤ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì–‘ë³´",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì˜ ì´ìµë³´ë‹¤ ë‹¨ì²´ë¥¼ ìœ„í•´ ê¸°êº¼ì´ ì–‘ë³´í•˜ëŠ” ë¯¸ë•ê³¼ í¬ìƒì •ì‹ ì„ ë³´ì„.",
              ìš°ìˆ˜: "í•„ìš”í•œ ê²½ìš° ì¹œêµ¬ì—ê²Œ ì–‘ë³´í•  ì¤„ ì•„ëŠ” ì„±ìˆ™í•œ ë§ˆìŒì„ ê°€ì§.",
              ë³´í†µ: "ìƒí™©ì— ë”°ë¼ ì¹œêµ¬ì˜ ì…ì¥ì„ ìˆ˜ìš©í•˜ê³  ì–‘ë³´í•˜ëŠ” ëª¨ìŠµì„ ë³´ì„.",
              ë…¸ë ¥: "ì¹œêµ¬ì™€ ë‚˜ëˆ„ê³  ì–‘ë³´í•˜ëŠ” ê¸°ì¨ì„ ì•Œë©° ë°°ë ¤ì‹¬ì„ í‚¤ì›Œë‚˜ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì‹ ë¢°",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì•½ì†ì„ ì² ì €íˆ ì§€ì¼œ ì¹œêµ¬ë“¤ ì‚¬ì´ì—ì„œ ë‘í„°ìš´ ì‹ ë¢°ì™€ ì¡´ê²½ì„ ë°›ìŒ.",
              ìš°ìˆ˜: "ì–¸í–‰ì´ ì¼ì¹˜í•˜ëŠ” ì •ì§í•œ íƒœë„ë¡œ ì¹œêµ¬ë“¤ì—ê²Œ ë¯¿ìŒì„ ì¤Œ.",
              ë³´í†µ: "ì¹œêµ¬ë“¤ê³¼ì˜ ì•½ì†ì„ ì†Œì¤‘íˆ ìƒê°í•˜ê³  ì§€í‚¤ë ¤ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "ì‚¬ì†Œí•œ ì•½ì†ì´ë¼ë„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” íƒœë„ë¥¼ í†µí•´ ëŒ€ì¸ê´€ê³„ì˜ ì‹ ë¢°ë¥¼ ìŒ“ì•„ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ë‹¤íˆ¼(ì„±ì¥)",
            isNeg: true,
            s: {
              ë§¤ìš°ìš°ìˆ˜: "",
              ìš°ìˆ˜: "",
              ë³´í†µ: "ê°ˆë“± ìƒí™© ë°œìƒ ì‹œ ëŒ€í™”ë¡œ íƒ€í˜‘ì ì„ ì°¾ìœ¼ë ¤ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "ì˜ê²¬ ì¶©ëŒ ì‹œ ìƒëŒ€ë°©ì˜ ì…ì¥ì—ì„œ ìƒê°í•´ë³´ë ¤ ì• ì“°ë©° ê°ì •ì„ ì¡°ì ˆí•˜ëŠ” ì„±ìˆ™í•¨ì„ ë³´ì—¬ì¤Œ.",
            },
          },
        ],
        ìƒí™œíƒœë„: [
          {
            word: "ê·¼ë©´/ì„±ì‹¤",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë§¤ì¼ ì‹œê°„ì„ ì•„ê»´ ì“°ë©° ê·¼ë©´ ì„±ì‹¤í•˜ê²Œ í•™êµ ìƒí™œì— ì„í•˜ì—¬ íƒ€ì˜ ëª¨ë²”ì´ ë¨.",
              ìš°ìˆ˜: "ì£¼ì–´ì§„ ì¼ê³¼ë¥¼ ì„±ì‹¤í•˜ê²Œ ìˆ˜í–‰í•˜ë©° ê·œì¹™ì ì¸ ìƒí™œ ìŠµê´€ì´ ë°°ì–´ ìˆìŒ.",
              ë³´í†µ: "í•™êµ ì¼ê³¼ì— ë§ì¶° ì„±ì‹¤í•˜ê³  ê·œì¹™ì ìœ¼ë¡œ ìƒí™œí•¨.",
              ë…¸ë ¥: "ìŠ¤ìŠ¤ë¡œ ì‹œê°„ ê´€ë¦¬ ê³„íšì„ ì„¸ìš°ê³  ì´ë¥¼ ì‹¤ì²œí•˜ë©° ìƒí™œ íƒœë„ë¥¼ ê¸ì •ì ìœ¼ë¡œ ê°œì„ í•´ ë‚˜ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì •ì§",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë§¤ì‚¬ ì •ì§í•˜ê³  íˆ¬ëª…í•˜ê²Œ í–‰ë™í•˜ì—¬ í•™ê¸‰ ë‚´ì—ì„œ ë°”ë¥¸ ì¸ì„±ì˜ í‘œë³¸ì´ ë¨.",
              ìš°ìˆ˜: "ê±°ì§“ ì—†ì´ ì†”ì§í•˜ê²Œ í–‰ë™í•˜ë©° ìì‹ ì˜ ì±…ì„ì„ ë‹¤í•¨.",
              ë³´í†µ: "ìì‹ ì˜ í–‰ë™ì— ëŒ€í•´ ì¸ì •í•  ì¤„ ì•„ëŠ” ì •ì§í•¨ì„ ë³´ì„.",
              ë…¸ë ¥: "ìì‹ ì˜ í–‰ë™ì— ëŒ€í•´ ì†”ì§í•˜ê²Œ ë§í•˜ëŠ” ìš©ê¸°ë¥¼ ê¸°ë¥´ë©° ì„±ìˆ™í•´ì§€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì ˆì•½",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "í•™ìš©í’ˆê³¼ ì—ë„ˆì§€ë¥¼ ì•„ê»´ ì“°ëŠ” ì ˆì•½ ì •ì‹ ì´ ëª¸ì— ë°°ì–´ ìˆì–´ í›Œë¥­í•¨.",
              ìš°ìˆ˜: "ë¬¼ê±´ì„ ì†Œì¤‘íˆ ë‹¤ë£¨ê³  ì£¼ë³€ ìì›ì„ ì•„ê»´ ì”€.",
              ë³´í†µ: "ìì‹ ì˜ ë¬¼ê±´ì„ ì˜ ì±™ê¸°ë©° ë‚­ë¹„ë¥¼ ì¤„ì´ë ¤ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "ë¬¼ê±´ì„ ì•„ê»´ ì“°ê³  ì •ë¦¬ ì •ëˆí•˜ëŠ” ìŠµê´€ì„ ìƒí™œí™”í•˜ë©° ë°œì „í•˜ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì²­ê²°",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì£¼ë³€ í™˜ê²½ì„ í•­ìƒ ê¹¨ë—ì´ ì •ë¦¬í•˜ë©° í•™ê¸‰ ì²­ê²° ìœ ì§€ì— ì†”ì„ ìˆ˜ë²”í•¨.",
              ìš°ìˆ˜: "ìì‹ ì˜ ìë¦¬ë¥¼ ê¹¨ë—í•˜ê²Œ ì •ëˆí•˜ê³  ìœ„ìƒ ê´€ë¦¬ê°€ ì² ì €í•¨.",
              ë³´í†µ: "ì²­ì†Œ ì‹œê°„ì— ë§¡ì€ êµ¬ì—­ì„ ì±…ì„ê° ìˆê²Œ ì²­ì†Œí•¨.",
              ë…¸ë ¥: "ì£¼ë³€ ì •ë¦¬ ì •ëˆì„ ìƒí™œí™”í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©° ìê¸° ê´€ë¦¬ë¥¼ ì˜ í•´ë‚´ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì§ˆì„œ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ê³µê³µì§ˆì„œë¥¼ ì² ì €íˆ ì§€í‚¤ë©° ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì—ê²Œë„ ëª¨ë²”ì ì¸ ì„ í•œ ì˜í–¥ë ¥ì„ í–‰ì‚¬í•¨.",
              ìš°ìˆ˜: "ì¤„ ì„œê¸° ë“± í•™êµ ë‚´ ê³µê³µì§ˆì„œë¥¼ ìŠ¤ìŠ¤ë¡œ ì˜ ì§€í‚´.",
              ë³´í†µ: "í•™êµ ê·œì¹™ê³¼ ì§ˆì„œë¥¼ ì§€í‚¤ë ¤ ë…¸ë ¥í•˜ë©° ìƒí™œí•¨.",
              ë…¸ë ¥: "ê³µê³µì¥ì†Œì—ì„œì˜ ì§ˆì„œ ì˜ì‹ì„ ë†’ì´ë©° ë¯¼ì£¼ ì‹œë¯¼ì˜ ê¸°ë³¸ ì†Œì–‘ì„ ìµí˜€ê°.",
            },
          },
          {
            word: "ì˜ˆì ˆ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë•Œì™€ ì¥ì†Œì— ë§ëŠ” í›Œë¥­í•œ ì˜ˆì ˆì„ ê°–ì¶”ì–´ í–‰ë™í•˜ë©° ì–¸í–‰ì´ ë§¤ìš° ë°”ë¦„.",
              ìš°ìˆ˜: "ì„ ìƒë‹˜ê³¼ ì¹œêµ¬ë“¤ì—ê²Œ í•­ìƒ ì˜ˆì˜ ë°”ë¥´ê²Œ í–‰ë™í•¨.",
              ë³´í†µ: "ê¸°ë³¸ì ì¸ ì˜ˆì ˆì„ ê°–ì¶”ê³  ì›ë§Œí•˜ê²Œ ì§€ëƒ„.",
              ë…¸ë ¥: "ìƒí™©ì— ë§ëŠ” ì˜¬ë°”ë¥¸ ì–¸ì–´ ì˜ˆì ˆì„ ìµíˆê³  ì‹¤ì²œí•˜ë ¤ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "ì¤€ë²•/ê·œì¹™",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "êµì¹™ì„ ìë°œì ìœ¼ë¡œ ì¤€ìˆ˜í•˜ë©° ê³µë™ì²´ ì˜ì‹ê³¼ ì¤€ë²•ì •ì‹ ì´ ë§¤ìš° íˆ¬ì² í•¨.",
              ìš°ìˆ˜: "í•™êµ ê·œì¹™ì„ ì˜ ìˆ™ì§€í•˜ê³  ì–´ê¸‹ë‚¨ ì—†ì´ ë°”ë¥´ê²Œ ìƒí™œí•¨.",
              ë³´í†µ: "ì •í•´ì§„ í•™ê¸‰ ê·œì¹™ì„ ë”°ë¥´ë ¤ ì„±ì‹¤íˆ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "ê³µë™ì²´ì˜ ê·œì¹™ì„ ê¹Šì´ ì´í•´í•˜ê³  ìë°œì ìœ¼ë¡œ ì§€í‚¤ë ¤ëŠ” ë…¸ë ¥ì„ í†µí•´ ìì§ˆì„ ê¸°ë¦„.",
            },
          },
          {
            word: "ìì£¼/ìë¦½",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì˜ ì¼ì„ ìŠ¤ìŠ¤ë¡œ ê³„íší•˜ê³  ì™„ë²½íˆ ì‹¤ì²œí•˜ëŠ” ìì£¼ì ì¸ íƒœë„ê°€ ë§¤ìš° ë‹ë³´ì„.",
              ìš°ìˆ˜: "ìŠ¤ìŠ¤ë¡œ í•  ìˆ˜ ìˆëŠ” ì¼ì€ ì£¼ë„ì ìœ¼ë¡œ í•´ê²°í•˜ë ¤ëŠ” ì˜ì§€ê°€ ê°•í•¨.",
              ë³´í†µ: "ìì‹ ì˜ ì¼ì„ ë‚¨ì—ê²Œ ë¯¸ë£¨ì§€ ê¸° ì•Šê³  ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ë ¤ í•¨.",
              ë…¸ë ¥: "ì–´ë ¤ìš´ ì¼ë„ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ë ¤ëŠ” ìì£¼ì„±ì„ ê¸°ë¥´ë©° ë…ë¦½ì‹¬ì„ í‚¤ì›Œê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ê±´ê°•/ì•ˆì „",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì•ˆì „ ìˆ˜ì¹™ì„ ì² ì €íˆ ì¤€ìˆ˜í•˜ê³  ê·œì¹™ì ì¸ ìš´ë™ìœ¼ë¡œ ìê¸° ê±´ê°• ê´€ë¦¬ì— ì™„ë²½í•¨.",
              ìš°ìˆ˜: "ê±´ê°•í•œ ìƒí™œ ìŠµê´€ì„ ìœ ì§€í•˜ë©° êµë‚´ ì•ˆì „ ìˆ˜ì¹™ì„ ì˜ ì§€í‚´.",
              ë³´í†µ: "ì²´ìœ¡ í™œë™ì— ë¬´ë¦¬ ì—†ì´ ì°¸ì—¬í•˜ë©° ì•ˆì „í•˜ê²Œ ìƒí™œí•¨.",
              ë…¸ë ¥: "ì•ˆì „ ìˆ˜ì¹™ì„ ìˆ™ì§€í•˜ê³  ì²´ë ¥ì„ ê¸°ë¥´ê¸° ìœ„í•œ ê¾¸ì¤€í•œ í™œë™ì— ì°¸ì—¬í•¨.",
            },
          },
          {
            word: "ê·œì¹™ìœ„ë°˜(ì„±ì¥)",
            isNeg: true,
            s: {
              ë§¤ìš°ìš°ìˆ˜: "",
              ìš°ìˆ˜: "",
              ë³´í†µ: "",
              ë…¸ë ¥: "êµì¹™ ì¤€ìˆ˜ì˜ ì¤‘ìš”ì„±ì„ ìŠ¤ìŠ¤ë¡œ ì¸ì§€í•˜ê³  í–‰ë™ì„ ë°”ë¥´ê²Œ ìˆ˜ì •í•˜ë©° ê¸ì •ì ì¸ ë³€í™”ë¥¼ ë³´ì„.",
            },
          },
        ],
        "ì ì„±Â·í™œë™": [
          {
            word: "ì°½ì˜",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë…ì°½ì ì¸ ì•„ì´ë””ì–´ë¡œ ê¸°ì¡´ì˜ í‹€ì„ ê¹¨ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì°½ì˜ë ¥ì´ ë§¤ìš° ë›°ì–´ë‚¨.",
              ìš°ìˆ˜: "ìƒˆë¡œìš´ ê´€ì ì—ì„œ ë¬¸ì œë¥¼ ë°”ë¼ë³´ëŠ” ì°½ì˜ì„±ê³¼ ìœ ì—°ì„±ì„ ë³´ì„.",
              ë³´í†µ: "ê¸°ì¡´ ë°©ì‹ê³¼ ë‹¤ë¥´ê²Œ ìƒê°í•´ ë³´ë ¤ ë‹¤ì–‘í•œ ì‹œë„ë¥¼ í•¨.",
              ë…¸ë ¥: "ë‹¤ì–‘í•œ ê°ë„ì—ì„œ ë¬¸ì œë¥¼ ë‹¤ê°ì ìœ¼ë¡œ ë¶„ì„í•´ë³´ëŠ” ì—°ìŠµì„ í†µí•´ ì°½ì˜ì„±ì„ ê¸°ë¥´ê³  ìˆìŒ.",
            },
          },
          {
            word: "íƒêµ¬",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì§€ì  í˜¸ê¸°ì‹¬ì„ ê°€ì§€ê³  ê´€ì‹¬ ë¶„ì•¼ë¥¼ ê¹Šì´ ìˆê²Œ íŒŒê³ ë“œëŠ” íƒêµ¬ ì •ì‹ ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ê´€ì‹¬ ë¶„ì•¼ì— ëŒ€í•´ ì§€ì†ì ìœ¼ë¡œ ìë£Œë¥¼ ì°¾ì•„ë³´ê³  íƒêµ¬í•¨.",
              ë³´í†µ: "ê¶ê¸ˆí•œ ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ìŠ¤ìŠ¤ë¡œ ì¡°ì‚¬í•˜ëŠ” íƒœë„ë¥¼ ë³´ì„.",
              ë…¸ë ¥: "ê´€ì‹¬ ëŒ€ìƒì„ ëˆê¸° ìˆê²Œ ê´€ì°°í•˜ë©° íƒêµ¬í•˜ë ¤ëŠ” í•™êµ¬ì  íƒœë„ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë°œì „ì‹œí‚´.",
            },
          },
          {
            word: "ë¶„ì„/ì •ë³´",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë°©ëŒ€í•œ ìë£Œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ í•µì‹¬ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ì •ë³´ì²˜ë¦¬ ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ì£¼ì–´ì§„ ì •ë³´ì™€ ë°ì´í„°ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  í™œìš©í•  ì¤„ ì•.",
              ë³´í†µ: "í•„ìš”í•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ì—¬ ë‚´ìš©ì„ ì´í•´í•˜ê³  ì •ë¦¬í•¨.",
              ë…¸ë ¥: "ì •ë³´ì˜ í•µì‹¬ íŒŒì•… ë¶„ì„ë ¥ì„ ê¸°ë¥´ë©° ì˜¬ë°”ë¥¸ ì •ë³´ í™œìš© ìœ¤ë¦¬ë¥¼ ìµí˜€ê°.",
            },
          },
          {
            word: "ì²´ìœ¡",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìš´ë™ ì‹ ê²½ì´ ë§¤ìš° ë›°ì–´ë‚˜ê³  ê°ì¢… ìŠ¤í¬ì¸  í™œë™ì—ì„œ íƒì›”í•œ ê¸°ëŸ‰ê³¼ í˜ì–´í”Œë ˆì´ ì •ì‹ ì„ ë°œíœ˜í•¨.",
              ìš°ìˆ˜: "ì²´ìœ¡ í™œë™ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë©° ìŠ¤í¬ì¸ ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ì¦ê¹€.",
              ë³´í†µ: "ì²´ìœ¡ ì‹œê°„ì— ë§¡ì€ í™œë™ì„ ì„±ì‹¤í•˜ê²Œ ìˆ˜í–‰í•¨.",
              ë…¸ë ¥: "ë‹¤ì–‘í•œ ì‹ ì²´ í™œë™ì— í¥ë¯¸ë¥¼ ê°–ê³  ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë©° í™œë ¥ì„ ë”í•˜ê³  ìˆìŒ.",
            },
          },
          {
            word: "ì˜ˆìˆ ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì˜ˆìˆ ì  ê°ìˆ˜ì„±ì´ ë§¤ìš° í’ë¶€í•˜ê³  ìì‹ ì˜ ì² í•™ì„ ì‘í’ˆìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” í‘œí˜„ë ¥ì´ ë›°ì–´ë‚¨.",
              ìš°ìˆ˜: "ìì‹ ì˜ ìƒê°ê³¼ ëŠë‚Œì„ ë¯¸ì  ê°ê°ì„ ë°œíœ˜í•˜ì—¬ í›Œë¥­í•˜ê²Œ í‘œí˜„í•¨.",
              ë³´í†µ: "ì˜ˆìˆ  í™œë™ì— ê´€ì‹¬ì„ ê°€ì§€ê³  ì¦ê²ê²Œ ì°¸ì—¬í•¨.",
              ë…¸ë ¥: "ìì‹ ì„ í‘œí˜„í•˜ëŠ” ë‹¤ì–‘í•œ ì˜ˆìˆ  í™œë™ì„ ê²½í—˜í•˜ë©° ë¯¸ì  ê°ìˆ˜ì„±ì„ í‚¤ì›Œê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ë…ì„œ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì±…ì„ ê¹Šì´ ìˆê²Œ í†µë…í•˜ê³  ì´ë¥¼ ë¹„íŒì ìœ¼ë¡œ ì‚¬ê³ í•˜ì—¬ ê¸€ë¡œ í’€ì–´ë‚´ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "í‹ˆí‹ˆì´ ì±…ì„ ì½ìœ¼ë©° ì˜¬ë°”ë¥¸ ë…ì„œ ìŠµê´€ê³¼ í’ë¶€í•œ ë°°ê²½ì§€ì‹ì„ ê°–ì¶¤.",
              ë³´í†µ: "ê¶Œì¥ ë„ì„œë¥¼ ì„±ì‹¤íˆ ì½ê³  ë‚´ìš©ì„ ì˜ ì´í•´í•¨.",
              ë…¸ë ¥: "ë…ì„œì— í¥ë¯¸ë¥¼ ë¶™ì´ê³  ë‹¤ì–‘í•œ í…ìŠ¤íŠ¸ë¥¼ ì½ìœ¼ë©° ë¬¸í•´ë ¥ì„ ê¾¸ì¤€íˆ í–¥ìƒì‹œí‚´.",
            },
          },
          {
            word: "ê³¼í•™/ìˆ˜ë¦¬",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë³µì¡í•œ ìˆ˜ë¦¬ì , ê³¼í•™ì  ì›ë¦¬ë¥¼ ì •í™•íˆ ê¿°ëš«ê³  ì‹¤í—˜ ì„¤ê³„ ë° ë…¼ë¦¬ì  ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ìˆ˜í•™ê³¼ ê³¼í•™ í˜„ìƒì— í¥ë¯¸ë¥¼ ê°€ì§€ê³  ê¹Šì´ ìˆê²Œ íƒêµ¬í•¨.",
              ë³´í†µ: "ìˆ˜ë¦¬/ê³¼í•™ êµê³¼ ë‚´ìš©ì— ì„±ì‹¤íˆ ì°¸ì—¬í•˜ê³  ê°œë…ì„ ì´í•´í•¨.",
              ë…¸ë ¥: "ê¸°ì´ˆì ì¸ ìˆ˜ë¦¬ ê°œë…ì„ ë‹¤ì§€ê³  ê³¼í•™ì  í˜¸ê¸°ì‹¬ì„ í™•ì¥í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•¨.",
            },
          },
          {
            word: "ì–¸ì–´",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì–´íœ˜ë ¥ì´ ë§¤ìš° í’ë¶€í•˜ê³  ìì‹ ì˜ ë³µì¡í•œ ìƒê°ì„ ë…¼ë¦¬ì •ì—°í•˜ê³  ìœ ì°½í•˜ê²Œ í‘œí˜„í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨.",
              ìš°ìˆ˜: "ìƒí™©ì— ë§ëŠ” ì ì ˆí•œ ì–¸ì–´ë¥¼ êµ¬ì‚¬í•˜ë©° ì„¤ë“ë ¥ ìˆëŠ” ë§í•˜ê¸°ë¥¼ í•¨.",
              ë³´í†µ: "ìì‹ ì˜ ì˜ì‚¬ë¥¼ ë§ê³¼ ê¸€ë¡œ ë¬´ë¦¬ ì—†ì´ í‘œí˜„í•¨.",
              ë…¸ë ¥: "ì–´íœ˜ë ¥ì„ ê¸°ë¥´ê³  ë¬¸ì¥ êµ¬ì„± ëŠ¥ë ¥ì„ í‚¤ìš°ë©° ì˜ì‚¬ì†Œí†µì˜ ì§ˆì„ ë†’ì´ê³  ìˆìŒ.",
            },
          },
        ],
        ì§„ë¡œíƒœë„: [
          {
            word: "ê³„íš/ì¤€ë¹„",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "êµ¬ì²´ì ì´ê³  ì‹¤í˜„ ê°€ëŠ¥í•œ ì§„ë¡œ ê³„íšì„ ìˆ˜ë¦½í•˜ê³  ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ ì² ì €í•˜ê²Œ ì¤€ë¹„í•˜ëŠ” ì‹¤í–‰ë ¥ì´ ì••ë„ì ì„.",
              ìš°ìˆ˜: "ìì‹ ì˜ ì§„ë¡œë¥¼ ìœ„í•´ ì²´ê³„ì ì¸ ê³„íšì„ ì„¸ìš°ê³  ì‹¤ì²œì— ì˜®ê¹€.",
              ë³´í†µ: "ì§„ë¡œì— ëŒ€í•œ ëŒ€ëµì ì¸ ê³„íšì„ ê°€ì§€ê³  ì†Œì–‘ì„ ìŒ“ê³  ìˆìŒ.",
              ë…¸ë ¥: "ìì‹ ì˜ ì§„ë¡œì— ëŒ€í•´ ì§„ì§€í•˜ê²Œ ê³ ë¯¼í•˜ë©° ë¯¸ë˜ë¥¼ ìœ„í•œ ì¤€ë¹„ë¥¼ ì°¨ê·¼ì°¨ê·¼ í•´ë‚˜ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "íƒìƒ‰/ì²´í—˜",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ë‹¤ì–‘í•œ ì§„ë¡œ ì •ë³´ë¥¼ ì£¼ë„ì ìœ¼ë¡œ íƒìƒ‰í•˜ê³  ì²´í—˜ í™œë™ì— ì ê·¹ ì°¸ì—¬í•˜ì—¬ ì§ì—… ì„¸ê³„ë¥¼ ê¹Šì´ ì´í•´í•¨.",
              ìš°ìˆ˜: "ì§„ë¡œ ê´€ë ¨ ì •ë³´ì™€ ì²´í—˜ í™œë™ì— ë†’ì€ ê´€ì‹¬ì„ ê°–ê³  ì°¾ì•„ë´„.",
              ë³´í†µ: "í•™êµì—ì„œ ì œê³µí•˜ëŠ” ì§„ë¡œ ì²´í—˜ í™œë™ì— ì„±ì‹¤íˆ ì°¸ì—¬í•¨.",
              ë…¸ë ¥: "ìì‹ ì—ê²Œ ë§ëŠ” ì§„ë¡œë¥¼ ì°¾ê¸° ìœ„í•´ ì§ì ‘ ê²½í—˜í•˜ê³  íƒìƒ‰í•˜ëŠ” ê¸°íšŒë¥¼ ì ê·¹ì ìœ¼ë¡œ ëŠ˜ë ¤ê°.",
            },
          },
          {
            word: "í¥ë¯¸/ê°€ì¹˜",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìì‹ ì˜ ì ì„±ì„ ëª…í™•íˆ íŒŒì•…í•˜ê³  ê±´ì „í•œ ì§ì—… ê°€ì¹˜ê´€ì„ í™•ë¦½í•˜ì—¬ ì§„ë¡œ ë°©í–¥ì„±ì´ ë§¤ìš° ëšœë ·í•¨.",
              ìš°ìˆ˜: "ìì‹ ì˜ í¥ë¯¸ ë¶„ì•¼ë¥¼ íŒŒì•…í•˜ê³  ì¼ì˜ ë³´ëŒê³¼ ê°€ì¹˜ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•¨.",
              ë³´í†µ: "ì—¬ëŸ¬ ì§ì—… ë¶„ì•¼ì— ê´€ì‹¬ì„ ë³´ì´ë©° ì§ì—…ì˜ í•„ìš”ì„±ì„ ì´í•´í•¨.",
              ë…¸ë ¥: "ìì‹ ì´ ë¬´ì—‡ì„ ì¢‹ì•„í•˜ëŠ”ì§€ ì‹¬ë„ ìˆê²Œ íƒìƒ‰í•˜ë©° ì˜¬ë°”ë¥¸ ì§ì—… ê°€ì¹˜ê´€ì„ í˜•ì„±í•´ ë‚˜ê°.",
            },
          },
          {
            word: "ì˜ì§€/ì‹¤ì²œ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì§„ë¡œ ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì—´ì •ê³¼ ì˜ì§€ê°€ í™•ê³ í•˜ë©°, ì–´ë–¤ ì¥ì• ë¬¼ë„ ê·¹ë³µí•´ ë‚´ëŠ” ê°•ë ¥í•œ ì‹¤ì²œë ¥ì„ ë³´ì„.",
              ìš°ìˆ˜: "ê¿ˆì„ í–¥í•œ ë„ì „ ì˜ì‹ì„ ê°€ì§€ê³  ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ë©° ì‹¤ì²œí•¨.",
              ë³´í†µ: "ìì‹ ì˜ ì§„ë¡œì— ëŒ€í•´ ê¸ì •ì ì¸ íƒœë„ë¡œ ì„í•¨.",
              ë…¸ë ¥: "ì‘ì€ ëª©í‘œë¶€í„° ì„¸ìš°ê³  ë‹¬ì„±í•˜ëŠ” ì„±ì·¨ê°ì„ ë§›ë³´ë©° ì§„ë¡œ ê°œì²™ ì˜ì§€ë¥¼ ë†’ì—¬ê°€ê³  ìˆìŒ.",
            },
          },
          {
            word: "ìƒë‹´",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì§„ë¡œ ë¬¸ì œì— ëŒ€í•´ ì£¼ë„ì ìœ¼ë¡œ ì‹¬ì¸µ ìƒë‹´ì„ ìš”ì²­í•˜ê³  ì¡°ì–¸ì„ ì™„ë²½íˆ ìˆ˜ìš©í•˜ì—¬ ë°œì „ì˜ ë°‘ê±°ë¦„ìœ¼ë¡œ ì‚¼ìŒ.",
              ìš°ìˆ˜: "ì„ ìƒë‹˜ì´ë‚˜ ë©˜í† ì™€ ì§„ë¡œì— ëŒ€í•´ ê¹Šì´ ìˆëŠ” ëŒ€í™”ë¥¼ ë‚˜ëˆ”.",
              ë³´í†µ: "ì§„ë¡œ ìƒë‹´ ì‹œê°„ì— ì„±ì‹¤íˆ ì„í•˜ë©° ì¡°ì–¸ì„ ê²½ì²­í•¨.",
              ë…¸ë ¥: "ìì‹ ì˜ ê³ ë¯¼ì„ ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ë‚˜ëˆ„ê³  ë‹¤ì–‘í•œ í”¼ë“œë°±ì„ ìˆ˜ìš©í•˜ë©° ì„±ì¥í•¨.",
            },
          },
        ],
        í•™ì—…íƒœë„: [
          {
            word: "ì§‘ì¤‘/ê²½ì²­",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìˆ˜ì—… ì‹œê°„ì— ê³ ë„ì˜ ì§‘ì¤‘ë ¥ì„ ë°œíœ˜í•˜ì—¬ ì„ ìƒë‹˜ì˜ ì„¤ëª…ì„ ì™„ë²½íˆ í¡ìˆ˜í•˜ê³  ì´ë¥¼ ì‹¬í™” íƒêµ¬ë¡œ ì—°ê²°í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•¨.",
              ìš°ìˆ˜: "ìˆ˜ì—…ì— ì™„ë²½íˆ ëª°ì…í•˜ì—¬ ì°¸ì—¬í•˜ë©° í•µì‹¬ì„ ì˜ íŒŒì•…í•¨.",
              ë³´í†µ: "ìˆ˜ì—… ì‹œê°„ì— ê·€ë¥¼ ê¸°ìš¸ì´ê³  ì¶©ì‹¤íˆ ì°¸ì—¬í•¨.",
              ë…¸ë ¥: "ìˆ˜ì—… ì§‘ì¤‘ë ¥ì„ ë†’ì´ê¸° ìœ„í•´ ìŠ¤ìŠ¤ë¡œ í•™ìŠµ í™˜ê²½ì„ ì •ëˆí•˜ê³  ëª°ì…í•˜ëŠ” í›ˆë ¨ì„ í†µí•´ í•™ì—… ì˜ì§€ë¥¼ ë‹¤ì§.",
            },
          },
          {
            word: "ì£¼ë„/ì§ˆë¬¸",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ëª¨ë¥´ëŠ” ë¶€ë¶„ì— ëŒ€í•´ ë‚ ì¹´ë¡œìš´ ì§ˆë¬¸ì„ ë˜ì§€ê³  ìŠ¤ìŠ¤ë¡œ í•´ë‹µì„ ì°¾ëŠ” ìê¸°ì£¼ë„ì  í•™ìŠµ ëŠ¥ë ¥ì´ íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•¨.",
              ìš°ìˆ˜: "ê¶ê¸ˆí•œ ì ì„ ì ê·¹ì ìœ¼ë¡œ ì§ˆë¬¸í•˜ë©° ë°°ìš´ ë‚´ìš©ì„ ì˜¨ì „íˆ ìì‹ ì˜ ê²ƒìœ¼ë¡œ ë§Œë“¦.",
              ë³´í†µ: "ì£¼ì–´ì§„ ê³¼ì œë¥¼ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ë ¤ ë…¸ë ¥í•˜ë©° ì§ˆë¬¸í•¨.",
              ë…¸ë ¥: "ì–´ë ¤ìš´ ê³¼ì œì— ì§ë©´í–ˆì„ ë•Œ í¬ê¸°í•˜ì§€ ì•Šê³  êµì‚¬ì—ê²Œ ë‹¤ê°€ê°€ í•´ê²°ì±…ì„ ë¬»ëŠ” ë“± ì£¼ë„ì„±ì„ ë ê¸° ì‹œì‘í•¨.",
            },
          },
          {
            word: "ë³µìŠµ/ì˜ˆìŠµ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì² ì €í•œ ì˜ˆìŠµê³¼ ë§¤ì¼ ê¾¸ì¤€í•œ ëˆ„ì  ë³µìŠµì„ í†µí•´ ì§€ì‹ì„ êµ¬ì¡°í™”í•˜ê³  í•™ìŠµ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•¨.",
              ìš°ìˆ˜: "ë°°ìš¸ ë‚´ìš©ì„ ë¯¸ë¦¬ í™•ì¸í•˜ê³ , ë°°ìš´ ë‚´ìš©ì€ ë‹¹ì¼ ë³µìŠµí•˜ì—¬ ì™„ë²½íˆ ìµí˜.",
              ë³´í†µ: "ì‹œí—˜ ê¸°ê°„ê³¼ ì¼ìƒì—ì„œ ê¾¸ì¤€íˆ ìˆ˜ì—… ì¤€ë¹„ ë° ë³µìŠµì„ í•´ì˜´.",
              ë…¸ë ¥: "ìŠ¤ìŠ¤ë¡œ ì˜ˆë³µìŠµ ê³„íšì„ ì„¸ìš°ê³  ì‹¤ì²œí•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©° ê¸°ì´ˆ í•™ë ¥ì„ íƒ„íƒ„íˆ ë‹¤ì§.",
            },
          },
          {
            word: "ë°œí‘œ/ê³¼ì œ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ê³¼ì œë¥¼ ì°½ì˜ì ìœ¼ë¡œ í•´ê²°í•˜ì—¬ ì œì¶œí•˜ê³ , ìì‹ ì˜ ì˜ê²¬ì„ ë…¼ë¦¬ì •ì—°í•˜ê²Œ ë°œí‘œí•˜ì—¬ ë™ë£Œë“¤ì˜ í•™ì—…ì  í†µì°°ì„ ë„ì›€.",
              ìš°ìˆ˜: "ìì‹ ê°ì„ ê°€ì§€ê³  ì¡°ë¦¬ ìˆê²Œ ë°œí‘œí•˜ë©° ì„±ì‹¤í•˜ê²Œ ê³¼ì œë¥¼ ìˆ˜í–‰í•¨.",
              ë³´í†µ: "ì§€ëª… ì‹œ ìì‹ ì˜ ìƒê°ì„ ë¬´ë¦¬ ì—†ì´ ë°œí‘œí•˜ê³  ê³¼ì œë¥¼ ì™„ìˆ˜í•¨.",
              ë…¸ë ¥: "ìë°œì ìœ¼ë¡œ ë°œí‘œí•˜ë ¤ëŠ” ìš©ê¸°ë¥¼ ë‚´ë©° ê³¼ì œë¥¼ ê¼¼ê¼¼íˆ ì±™ê²¨ ê¸°í•œ ë‚´ì— ì œì¶œí•˜ëŠ” ì±…ì„ê°ì„ ê·¸ë¦¼.",
            },
          },
          {
            word: "í˜‘ë ¥/ì„±ì·¨",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ëª¨ë‘  í•™ìŠµ ì‹œ ë™ë£Œì˜ ë¶€ì¡±í•œ ì ì„ ì±„ì›Œì£¼ê³  í˜‘ë ¥í•˜ì—¬ ìµœì„ ì˜ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ëŠ” í•™ì—…ì  ë¦¬ë”ì‹­ê³¼ ì„±ì·¨ìš•ì´ ë¹›ë‚¨.",
              ìš°ìˆ˜: "ëª¨ë‘ ì›ë“¤ê³¼ í›Œë¥­íˆ í˜‘ë ¥í•˜ê³  ë†’ì€ í•™ì—… ì„±ì·¨ ëª©í‘œë¥¼ í–¥í•´ ë§¤ì§„í•¨.",
              ë³´í†µ: "ëª¨ë‘  í™œë™ì—ì„œ ë§¡ì€ ì—­í• ì„ ìˆ˜í–‰í•˜ë©° í•™ì—… í–¥ìƒì— ê´€ì‹¬ì„ ê°€ì§.",
              ë…¸ë ¥: "í•™ìŠµ í™œë™ì—ì„œ ì¹œêµ¬ë“¤ê³¼ ê¸ì •ì ìœ¼ë¡œ í˜‘ë ¥í•˜ë©° ìì‹ ì—ê²Œ ë§ëŠ” í•™ìŠµ ëª©í‘œë¥¼ ì„¸ì›Œ ì‹¤ì²œí•˜ëŠ” ë…¸ë ¥ì„ ë³´ì„.",
            },
          },
        ],
        ê¸°íƒ€: [
          {
            word: "ì¢…í•©/ì¼ë°˜",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ì§€ë•ì²´ë¥¼ ì™„ë²½íˆ ê²¸ë¹„í•œ í•™ìƒìœ¼ë¡œ, í•™êµìƒí™œ ì „ë°˜ì— ê±¸ì³ íƒ€ì˜ ê·€ê°ì´ ë˜ë©° í›Œë¥­í•œ ë¯¸ë˜ ì¸ì¬ë¡œì˜ ì„±ì¥ì´ í™•ì‹ ë¨.",
              ìš°ìˆ˜: "ë‹¤ë°©ë©´ì—ì„œ ê³ ë¥¸ ë°œë‹¬ì„ ë³´ì´ë©° í•™êµìƒí™œì„ ë§¤ìš° í›Œë¥­í•˜ê³  ì„±ì‹¤í•˜ê²Œ í•´ëƒ„.",
              ë³´í†µ: "í•™êµìƒí™œì— ë¬´ë‚œí•˜ê²Œ ì ì‘í•˜ë©° ìì‹ ì˜ ì—­í• ì„ ë‹¤í•˜ëŠ” ì„±ì‹¤í•œ í•™ìƒì„.",
              ë…¸ë ¥: "ìŠ¤ìŠ¤ë¡œ ë¶€ì¡±í•œ ì ì„ ì¸ì§€í•˜ê³  ê°œì„ í•˜ê³ ì ë…¸ë ¥í•˜ë©° í•™êµìƒí™œ ì „ë°˜ì—ì„œ ì ì§„ì ìœ¼ë¡œ ë‚˜ì•„ì§€ëŠ” ëª¨ìŠµì„ ë³´ì„.",
            },
          },
          {
            word: "ë°œì „/ë³€í™”",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "í•™ê¸° ì´ˆì— ë¹„í•´ ë¹„ì•½ì ì¸ í•™ì—…ì /ì¸ì„±ì  ë°œì „ì„ ì´ë£¨ì–´ë‚´ë©° ê¸ì •ì  ë³€í™”ì˜ ì•„ì´ì½˜ì´ ë¨.",
              ìš°ìˆ˜: "ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ì—¬ ìì‹ ì˜ ë‹¨ì ì„ ê³ ì¹˜ê³  ë‹¤ë°©ë©´ì—ì„œ ê¸ì •ì ì¸ ì„±ì¥ì„ ë³´ì—¬ì¤Œ.",
              ë³´í†µ: "ìƒí™œ íƒœë„ì— ê¸ì •ì ì¸ ë³€í™”ë¥¼ ì£¼ë©° ì¡°ê¸ˆì”© ë‚˜ì•„ì§€ëŠ” ëª¨ìŠµì„ ë³´ì„.",
              ë…¸ë ¥: "ë°”ëŒì§í•œ ë°©í–¥ìœ¼ë¡œ ë³€í™”í•˜ê¸° ìœ„í•œ ë™ê¸°ë¥¼ ë‹¤ì§€ê³  ì§€ì†ì ì¸ ë…¸ë ¥ì„ í†µí•´ ì„±ì¥ ê¶¤ë„ì— ì˜¤ë¦„.",
            },
          },
          {
            word: "ì ì‘/ê·¹ë³µ",
            s: {
              ë§¤ìš°ìš°ìˆ˜:
                "ìƒˆë¡œìš´ í™˜ê²½ì— ë¹ ë¥´ê²Œ ì ì‘í•˜ê³  ì–´ë–¤ ì–´ë ¤ì›€ì´ë‚˜ ì—­ê²½ë„ í”ë“¤ë¦¼ ì—†ì´ ì£¼ë„ì ìœ¼ë¡œ ê·¹ë³µí•´ ë‚´ëŠ” ë©˜íƒˆì´ í›Œë¥­í•¨.",
              ìš°ìˆ˜: "í•™êµìƒí™œì— ì˜ ì ì‘í•˜ë©° ë§ˆì£¼í•œ ì–´ë ¤ì›€ì„ ì´ê²¨ë‚´ë ¤ëŠ” êµ³ì€ ì˜ì§€ë¥¼ ë³´ì„.",
              ë³´í†µ: "í•™ê¸‰ ë¶„ìœ„ê¸°ì— ì˜ ìœµí™”ë˜ë©° ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ ë…¸ë ¥í•¨.",
              ë…¸ë ¥: "ìƒˆë¡œìš´ í™˜ê²½ê³¼ ê³¼ì œì— ëŒ€í•œ ë‘ë ¤ì›€ì„ ì—†ì• ê³  í¬ê¸°í•˜ì§€ ì•ŠëŠ” ìì„¸ë¡œ ì ì‘ë ¥ì„ í‚¤ì›Œê°.",
            },
          },
        ],
      };

      let db = {};
      let recordIdCounter = 0;
      let finalHistoryStack = [];
      let tempContext = null;

      window.onload = () => {
        db[currentStudent] = { logs: [], comprehensive: "" };
        initModalList();
        document.getElementById("logDate").value = new Date()
          .toISOString()
          .split("T")[0];
        updateByte();
      };

      function showToast(m) {
        const t = document.getElementById("toast");
        t.textContent = m;
        t.style.opacity = 1;
        setTimeout(() => (t.style.opacity = 0), 2000);
      }

      function initModalList() {
        const list = document.getElementById("modalStudentList");
        const div = document.createElement("div");
        div.className = "student-item active";
        div.textContent = currentStudent;
        list.appendChild(div);
      }

      function openModal() {
        document.getElementById("logModal").style.display = "block";
      }
      function closeModal() {
        document.getElementById("logModal").style.display = "none";
        loadMainSummary();
      }

      function saveComprehensive() {
        db[currentStudent].comprehensive =
          document.getElementById("comprehensiveInput").value;
      }

      function resetInputRows() {
        document.getElementById("inputRowsContainer").innerHTML = "";
        addRow();
      }

      function addRow() {
        const container = document.getElementById("inputRowsContainer");
        const wrapper = document.createElement("div");
        wrapper.className = "input-wrapper";

        const rowDiv = document.createElement("div");
        rowDiv.style.display = "flex";
        rowDiv.style.gap = "12px";
        rowDiv.style.alignItems = "center";
        rowDiv.className = "input-row";

        rowDiv.innerHTML = `
            <select class="input cat-select" style="width:130px;" onchange="updateKeywordTray(this)">
              <option value="" disabled selected>ì˜ì—­ ì„ íƒ</option>
              ${cats.map((c) => `<option>${c}</option>`).join("")}
            </select>
            <select class="input level-select" style="width:110px;" onchange="updateSentenceByLevel(this)">
                <option value="" disabled selected>ìˆ˜ì¤€</option>
                ${levels.map((l) => `<option>${l}</option>`).join("")}
            </select>
            <input type="text" class="input case-input" style="flex:1;" placeholder="ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ì•„ë˜ í‚¤ì›Œë“œë¥¼ ë‹¤ì¤‘ ì„ íƒí•˜ì„¸ìš”">
            <button class="btn sm danger-btn" onclick="removeInputRow(this)">âœ• ì‚­ì œ</button>
        `;

        const trayDiv = document.createElement("div");
        trayDiv.className = "keyword-tray";
        trayDiv.innerHTML =
          "<span style='color:#999; font-size:12px;'>ì¢Œì¸¡ì—ì„œ ì˜ì—­ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”.</span>";

        wrapper.appendChild(rowDiv);
        wrapper.appendChild(trayDiv);
        container.appendChild(wrapper);
      }

      function updateKeywordTray(select) {
        const wrapper = select.closest(".input-wrapper");
        const tray = wrapper.querySelector(".keyword-tray");
        const row = wrapper.querySelector(".input-row");
        loadKeywordsToTray(tray, select.value, row);
      }

      function loadKeywordsToTray(tray, category, rowElement) {
        tray.innerHTML = "";
        const keywords = KEYWORD_DB[category] || [];
        if (keywords.length === 0) {
          tray.innerHTML =
            "<span style='color:#999; font-size:12px;'>í‚¤ì›Œë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.</span>";
          return;
        }

        const levelSelect = rowElement.querySelector(".level-select");
        const input = rowElement.querySelector(".case-input");

        keywords.forEach((kData) => {
          const chip = document.createElement("div");
          chip.className = "keyword-chip";
          if (kData.isNeg) chip.classList.add("neg");
          chip.textContent = kData.word;

          const updateActiveState = () => {
            const level = levelSelect.value;
            const sentence = level ? kData.s[level] || "" : "";
            if (sentence && input.value.includes(sentence))
              chip.classList.add("active");
            else chip.classList.remove("active");
          };
          updateActiveState();

          chip.onclick = () => {
            const level = levelSelect.value;
            if (!level) return alert("ì„±ì·¨ìˆ˜ì¤€ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.");
            const sentence = kData.s[level] || "";
            if (!sentence) return;

            if (chip.classList.contains("active")) {
              input.value = input.value
                .replace(sentence, "")
                .replace(/\s{2,}/g, " ")
                .trim();
              chip.classList.remove("active");
            } else {
              input.value = (input.value + " " + sentence).trim();
              chip.classList.add("active");
            }
          };
          tray.appendChild(chip);
        });

        input.addEventListener("input", () => {
          const level = levelSelect.value;
          if (!level) return;
          tray.querySelectorAll(".keyword-chip").forEach((chip, idx) => {
            const sentence = keywords[idx].s[level] || "";
            if (sentence && input.value.includes(sentence))
              chip.classList.add("active");
            else chip.classList.remove("active");
          });
        });
      }

      function updateSentenceByLevel(selectElement) {
        const wrapper = selectElement.closest(".input-wrapper");
        const cat = wrapper.querySelector(".cat-select").value;
        const newLevel = selectElement.value;
        const input = wrapper.querySelector(".case-input");
        let currentText = input.value;

        if (!cat || !currentText) return;
        const keywords = KEYWORD_DB[cat] || [];

        keywords.forEach((kData) => {
          for (let oldLevel in kData.s) {
            if (
              oldLevel !== newLevel &&
              kData.s[oldLevel] &&
              currentText.includes(kData.s[oldLevel])
            ) {
              currentText = currentText.replace(
                kData.s[oldLevel],
                kData.s[newLevel] || ""
              );
            }
          }
        });

        input.value = currentText.replace(/\s{2,}/g, " ").trim();
        const tray = wrapper.querySelector(".keyword-tray");
        loadKeywordsToTray(tray, cat, wrapper.querySelector(".input-row"));
      }

      function removeInputRow(btn) {
        const wrappers = document.querySelectorAll(".input-wrapper");
        if (wrappers.length > 1) btn.closest(".input-wrapper").remove();
        else alert("ìµœì†Œ í•œ ê°œì˜ í•­ëª©ì€ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.");
      }

      function applyAndReset() {
        const date = document.getElementById("logDate").value;
        const wrappers = document.querySelectorAll(".input-wrapper");
        let tempRecords = [];

        for (let w of wrappers) {
          const cat = w.querySelector(".cat-select").value;
          const level = w.querySelector(".level-select").value;
          let text = w
            .querySelector(".case-input")
            .value.trim()
            .replace(/\n/g, " ");

          if (!cat) continue;
          if (!level) return alert(`'${cat}' ì˜ì—­ì˜ ì„±ì·¨ìˆ˜ì¤€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`);
          if (!text) return alert("í™œë™ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

          // [í•µì‹¬ ì—…ë°ì´íŠ¸] ëª©ë¡ì— ì €ì¥ë˜ëŠ” ê·¸ ì¦‰ì‹œ ë§ì¶¤ë²• ê²€ì‚¬ê¸°ë¥¼ í†µê³¼ì‹œì¼œ UI ìƒì—ì„œ êµì‚¬ê°€ ë³€í™˜ ê²°ê³¼ë¥¼ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤!
          text = grammarEngine.convert(text);

          const isDup = db[currentStudent].logs.some(
            (log) => log.date === date && log.cat === cat && log.text === text
          );
          if (isDup) {
            alert(`[ì¤‘ë³µ ê²½ê³ ] ${date}ì— ë™ì¼í•œ ê¸°ë¡ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.`);
            continue;
          }

          tempRecords.push({
            id: ++recordIdCounter,
            date,
            cat,
            level,
            text,
            checked: true,
          });
        }

        if (tempRecords.length > 0) {
          db[currentStudent].logs.forEach((l) => (l.checked = false));
          db[currentStudent].logs.push(...tempRecords);
          showToast(`${tempRecords.length}ê±´ ë¦¬ìŠ¤íŠ¸ ì €ì¥ ì™„ë£Œ`);
          resetInputRows();
          renderHistory();
        }
      }

      function renderHistory() {
        const view = document.getElementById("historyGroupView");
        const data = db[currentStudent].logs;
        if (!data || data.length === 0) {
          view.innerHTML =
            "<div style='text-align:center; padding: 20px; color:#999;'>ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>";
          return;
        }

        let html = "";
        [...data].reverse().forEach((item) => {
          html += `
                <div class="history-item ${item.checked ? "checked" : ""}">
                    <div style="display:flex; align-items:flex-start; flex:1;">
                        <input type="checkbox" class="history-chk" ${
                          item.checked ? "checked" : ""
                        } onchange="toggleModalCheck(${item.id})">
                        <div>
                            <div style="font-size:12px; color:#666; margin-bottom:4px;">${
                              item.date
                            } <span style="background:#e0f2fe; color:#0369a1; padding:2px 6px; border-radius:4px; font-weight:bold;">${
            item.cat
          } (${item.level})</span></div>
                            <div style="color:#333; line-height:1.4;">${
                              item.text
                            }</div>
                        </div>
                    </div>
                    <div class="history-actions"><button class="btn sm danger-btn" onclick="deleteRecord(${
                      item.id
                    })">ì‚­ì œ</button></div>
                </div>`;
        });
        view.innerHTML = html;
      }

      function toggleModalCheck(id) {
        const item = db[currentStudent].logs.find((l) => l.id === id);
        if (item) item.checked = !item.checked;
        renderHistory();
      }
      function checkAllModal(state) {
        db[currentStudent].logs.forEach((l) => (l.checked = state));
        renderHistory();
      }
      function deleteRecord(id) {
        if (!confirm("ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
        db[currentStudent].logs = db[currentStudent].logs.filter(
          (r) => r.id !== id
        );
        renderHistory();
      }

      function loadMainSummary() {
        const data = db[currentStudent];
        let summary = "";
        const checkedLogs = data.logs.filter((l) => l.checked);

        if (checkedLogs.length > 0) {
          summary += "[ì²´í¬ëœ í™œë™ ìš”ì•½]\n";
          checkedLogs
            .sort((a, b) => a.date.localeCompare(b.date))
            .forEach((r) => {
              summary += `- [${r.cat}] ${r.text}\n`;
            });
        }
        if (data.comprehensive)
          summary += `\n[ì¢…í•© ì˜ê²¬]\n${data.comprehensive}\n`;
        document.getElementById("rawDataDisplay").value =
          summary || "ì„ íƒëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
      }

      function assembleContext(targets, comprehensive) {
        let uniqueTexts = {
          "ì„±ê²©/ìƒí™œ": new Set(),
          êµìš°ê´€ê³„: new Set(),
          "í•™ì—…/ì§„ë¡œ": new Set(),
          ê¸°íƒ€: new Set(),
        };
        let catLevels = {
          "ì„±ê²©/ìƒí™œ": [],
          êµìš°ê´€ê³„: [],
          "í•™ì—…/ì§„ë¡œ": [],
          ê¸°íƒ€: [],
        };
        let catFreq = { "ì„±ê²©/ìƒí™œ": 0, êµìš°ê´€ê³„: 0, "í•™ì—…/ì§„ë¡œ": 0, ê¸°íƒ€: 0 };

        targets.forEach((l) => {
          let text = l.text.trim();
          text = text.replace(/\.{2,}/g, ".");
          if (!text.endsWith(".")) text += ".";

          let targetCat = "";
          if (["ì„±ê²©", "ìƒí™œíƒœë„"].includes(l.cat)) targetCat = "ì„±ê²©/ìƒí™œ";
          else if (l.cat === "êµìš°ê´€ê³„") targetCat = "êµìš°ê´€ê³„";
          else if (["í•™ì—…íƒœë„", "ì§„ë¡œíƒœë„", "ì ì„±Â·í™œë™"].includes(l.cat))
            targetCat = "í•™ì—…/ì§„ë¡œ";
          else targetCat = "ê¸°íƒ€";

          if (!uniqueTexts[targetCat].has(text)) {
            uniqueTexts[targetCat].add(text);
            catLevels[targetCat].push(l.level);
            catFreq[targetCat]++;
          }
        });

        function getEnhancer(levelsArr) {
          let count = levelsArr.length;
          if (count < 2) return "";
          let hasStruggle =
            levelsArr.includes("ë³´í†µ") || levelsArr.includes("ë…¸ë ¥");

          if (hasStruggle) {
            if (count === 2) return "í¬ê¸°í•˜ì§€ ì•Šê³  ê¾¸ì¤€í•˜ê²Œ ";
            if (count >= 3)
              return "ì—¬ëŸ¬ ë‚œê´€ ì†ì—ì„œë„ êº¾ì´ì§€ ì•ŠëŠ” ì§‘ë…ìœ¼ë¡œ ì¼ê´€ë˜ê²Œ ";
          } else {
            if (count === 2) return "í•œê²°ê°™ì´ í›Œë¥­í•œ ëª¨ìŠµìœ¼ë¡œ ";
            if (count >= 3)
              return "ëˆ„êµ¬ë³´ë‹¤ë„ ë‹ë³´ì´ê³  íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•  ì •ë„ë¡œ ì™„ë²½í•˜ê²Œ ";
          }
          return "";
        }

        let paras = [];

        if (uniqueTexts["ì„±ê²©/ìƒí™œ"].size > 0) {
          paras.push(
            `ì„±ê²© ë° í‰ì†Œ ìƒí™œ íƒœë„ë¥¼ ì‚´í´ë³´ë©´, ${getEnhancer(
              catLevels["ì„±ê²©/ìƒí™œ"]
            )}` + Array.from(uniqueTexts["ì„±ê²©/ìƒí™œ"]).join(" ")
          );
        }
        if (uniqueTexts["êµìš°ê´€ê³„"].size > 0) {
          let prefix =
            paras.length > 0
              ? "ë˜í•œ êµìš° ê´€ê³„ì— ìˆì–´ì„œëŠ” "
              : "êµìš° ê´€ê³„ì— ìˆì–´ì„œëŠ” ";
          paras.push(
            `${prefix}${getEnhancer(catLevels["êµìš°ê´€ê³„"])}` +
              Array.from(uniqueTexts["êµìš°ê´€ê³„"]).join(" ")
          );
        }
        if (uniqueTexts["í•™ì—…/ì§„ë¡œ"].size > 0) {
          let prefix =
            paras.length > 0
              ? "ë‚˜ì•„ê°€ í•™ì—… ì„±ì·¨ ë° ì§„ë¡œ íƒìƒ‰ ì¸¡ë©´ì—ì„œëŠ” "
              : "í•™ì—… ì„±ì·¨ ë° ì§„ë¡œ íƒìƒ‰ ì¸¡ë©´ì„ ì‚´í´ë³´ë©´, ";
          paras.push(
            `${prefix}${getEnhancer(catLevels["í•™ì—…/ì§„ë¡œ"])}` +
              Array.from(uniqueTexts["í•™ì—…/ì§„ë¡œ"]).join(" ")
          );
        }
        if (uniqueTexts["ê¸°íƒ€"].size > 0) {
          let prefix = paras.length > 0 ? "ê·¸ ì™¸ì—ë„ " : "";
          paras.push(`${prefix}` + Array.from(uniqueTexts["ê¸°íƒ€"]).join(" "));
        }

        let resultText = paras.join(" ");
        if (comprehensive) {
          let comp = grammarEngine.convert(comprehensive.trim());
          resultText += (paras.length > 0 ? " ì¢…í•©ì ìœ¼ë¡œ ë³¼ ë•Œ, " : "") + comp;
        }

        return {
          text: grammarEngine.convert(
            resultText.replace(/\s{2,}/g, " ").trim()
          ),
          freq: catFreq,
        };
      }

      function generateDraftAI() {
        const data = db[currentStudent];
        const targets = data.logs.filter((l) => l.checked);
        if (targets.length === 0 && !data.comprehensive)
          return alert(
            "ìƒì„±í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ëª¨ë‹¬ì—ì„œ ê¸°ë¡ì„ ì‘ì„±í•˜ê³  ì²´í¬í•´ì£¼ì„¸ìš”."
          );

        const { text: resultText, freq: catFreq } = assembleContext(
          targets,
          data.comprehensive
        );
        document.getElementById("tempDraft").value = resultText;

        tempContext = {
          hashKey:
            "BHV|" +
            targets.map((t) => t.id).join(",") +
            "|" +
            (data.comprehensive ? "COMP" : ""),
          logIds: targets.map((t) => t.id),
          freq: catFreq,
          comp: data.comprehensive,
          aiGeneratedText: resultText,
        };

        showToast("í–‰íŠ¹ ë¬¸ë‹¨ ì´ˆì•ˆì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }

      function updateDuplicateStatus() {
        let catCounts = {
          "ì„±ê²©/ìƒí™œ": 0,
          êµìš°ê´€ê³„: 0,
          "í•™ì—…/ì§„ë¡œ": 0,
          ê¸°íƒ€: 0,
        };
        finalHistoryStack.forEach((item) => {
          if (item.status !== "deleted") {
            for (let cat in item.freq) {
              if (item.freq[cat] > 0) catCounts[cat]++;
            }
          }
        });

        finalHistoryStack.forEach((item) => {
          if (item.status !== "deleted") {
            item.needsUpgrade = Object.keys(item.freq).some(
              (cat) => item.freq[cat] > 0 && catCounts[cat] > 1
            );
          }
        });
      }

      function moveToFinal() {
        const draftText = document.getElementById("tempDraft").value;
        const preview = document.getElementById("finalPreview");
        if (!draftText || !tempContext) return alert("ìƒì„±ëœ ì´ˆì•ˆì´ ì—†ìŠµë‹ˆë‹¤.");

        let aiSentences = getSentences(tempContext.aiGeneratedText);
        let currentSentences = getSentences(draftText);
        let manualCount = 0;
        currentSentences.forEach((cs) => {
          if (cs && !aiSentences.includes(cs)) manualCount++;
        });

        let correctedText = grammarEngine.convert(draftText);

        let b = 0;
        let testText = preview.innerText + " " + correctedText;
        for (let i = 0; i < testText.length; i++)
          b += testText.charCodeAt(i) > 127 ? 3 : 1;
        if (b > 1500)
          return alert(
            "âš ï¸ ìƒê¸°ë¶€ ìµœëŒ€ ìš©ëŸ‰(1500 Byte)ì„ ì´ˆê³¼í•˜ì—¬ ì „ì†¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
          );

        if (preview.innerText.includes("í•™ìƒì„ ì„ íƒí•˜ê³ "))
          preview.innerText = "";
        if (preview.innerText.trim() !== "")
          preview.appendChild(document.createTextNode(" "));

        const uniqueId = "block_" + Date.now();
        const span = document.createElement("span");
        span.className = "sentence-block";
        span.id = uniqueId;
        span.innerText = correctedText;
        preview.appendChild(span);

        finalHistoryStack.push({
          id: uniqueId,
          hashKey: tempContext.hashKey,
          logIds: tempContext.logIds,
          freq: tempContext.freq,
          comp: tempContext.comp,
          aiGeneratedText: tempContext.aiGeneratedText,
          len: correctedText.length,
          status: "active",
          needsUpgrade: false,
          manualCount: manualCount,
        });

        updateDuplicateStatus();
        renderInfoLayer();
        updateByte();
      }

      function renderInfoLayer() {
        const con = document.getElementById("infoContentContainer");
        con.innerHTML = "";
        if (finalHistoryStack.length === 0) {
          con.innerHTML = "ìƒì„± ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.";
          return;
        }

        finalHistoryStack.forEach((item, index) => {
          const div = document.createElement("div");
          div.className = `info-card ${item.status} ${
            item.needsUpgrade ? "duplicate" : ""
          }`;

          div.onclick = () => {
            div.classList.toggle("expanded");
            highlightSentence(item.id);
          };

          let tagsHtml = "";
          for (const [cat, count] of Object.entries(item.freq)) {
            if (count > 0)
              tagsHtml += `<span class="tag">${cat} <b style="color:#1f4ddc;">${count}ê±´</b></span>`;
          }
          if (item.comp) tagsHtml += `<span class="tag">ì¢…í•©ì˜ê²¬ í¬í•¨</span>`;

          if (item.manualCount > 0) {
            tagsHtml += `<span class="tag" style="background:#fef08a; border-color:#fde047; color:#854d0e;">âœï¸ ì§ì ‘ ì‘ì„± ${item.manualCount}ê±´</span>`;
          }

          let delBtn = `<button class="delete-sentence-btn" onclick="deleteFinalSentence(event, '${item.id}')">ğŸ—‘ï¸ ì‚­ì œ</button>`;
          let dupAlert = item.needsUpgrade
            ? `<span class="dup-badge">âš ï¸ ì¹´í…Œê³ ë¦¬ ëˆ„ì  (ë‹¤ë“¬ê¸° ìš”ë§)</span>`
            : "";
          let statBadge =
            item.status === "deleted"
              ? "<span class='status-badge' style='background:#ef4444;'>âŒ ì‚­ì œë¨</span>"
              : item.status === "optimized"
              ? "<span class='status-badge' style='background:#8b5cf6;'>ğŸª„ í†µí•© ë° ê°•í™”ë¨</span>"
              : "";

          div.innerHTML = `
            <div class="accordion-header">
                <span style="display:flex; align-items:center; gap:5px;">ğŸ‘¤ ìœµí•© ë¬¸ë‹¨ #${
                  index + 1
                } ${dupAlert}</span>
                <span class="accordion-chevron">â–¼</span>
            </div>
            <div class="accordion-body-wrapper">
                <div class="accordion-body">
                    <div class="accordion-content">
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <div>${statBadge}</div>
                            ${delBtn}
                        </div>
                        <div style="display:flex; gap:6px; flex-wrap:wrap; margin-top:4px;">${tagsHtml}</div>
                    </div>
                </div>
            </div>
          `;
          con.appendChild(div);
        });
      }

      function highlightSentence(id) {
        document
          .querySelectorAll(".sentence-block")
          .forEach((el) => el.classList.remove("highlight-active"));
        const target = document.getElementById(id);
        if (target) {
          target.scrollIntoView({ behavior: "smooth", block: "center" });
          target.classList.add("highlight-active");
          setTimeout(() => {
            target.classList.remove("highlight-active");
          }, 2000);
        }
      }

      function deleteFinalSentence(event, id) {
        event.stopPropagation();
        const target = document.getElementById(id);
        if (target) {
          if (target.previousSibling && target.previousSibling.nodeType === 3)
            target.previousSibling.remove();
          target.remove();
        }
        finalHistoryStack = finalHistoryStack.filter((item) => item.id !== id);
        updateDuplicateStatus();
        renderInfoLayer();
        updateByte();
        showToast("ë¬¸ë‹¨ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
      }

      function checkAndUpgradeIntegrity() {
        let activeItems = finalHistoryStack.filter(
          (i) => i.status !== "deleted"
        );
        if (activeItems.length === 0) return alert("ë‹¤ë“¬ì„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.");

        if (
          !confirm(
            "âš ï¸ [ì£¼ì˜]\nAI ë‹¤ë“¬ê¸° ì‹¤í–‰ ì‹œ ì›ë³¸ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¬¸ë§¥ì´ ì¬ì¡°ë¦½ë©ë‹ˆë‹¤.\nì„ ìƒë‹˜ì´ ì§ì ‘ ì¶”ê°€í•˜ì‹  ë¬¸ì¥ì€ ì§€ì›Œì§€ì§€ ì•Šê³  ë³´ì¡´ë˜ì–´ ë’¤ì— ë³‘í•©ë©ë‹ˆë‹¤.\nì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
          )
        )
          return;

        let allAIGeneratedText = activeItems
          .map((i) => i.aiGeneratedText)
          .join(" ");
        let aiSentences = getSentences(allAIGeneratedText);

        let currentSentences = getSentences(
          document.getElementById("finalPreview").innerText
        );

        let customSentences = [];
        currentSentences.forEach((cs) => {
          if (cs && !aiSentences.includes(cs)) {
            customSentences.push(cs);
          }
        });

        let allActiveLogIds = [];
        let compToUse = "";
        activeItems.forEach((item) => {
          if (item.logIds) allActiveLogIds.push(...item.logIds);
          if (item.comp) compToUse = item.comp;
        });
        allActiveLogIds = [...new Set(allActiveLogIds)];
        let allTargets = db[currentStudent].logs.filter((l) =>
          allActiveLogIds.includes(l.id)
        );

        const { text: upgradedText, freq: mergedFreq } = assembleContext(
          allTargets,
          compToUse
        );

        let finalCombinedText = upgradedText;
        if (customSentences.length > 0) {
          finalCombinedText += " " + customSentences.join(" ");
        }

        let finalText = grammarEngine.convert(finalCombinedText);

        let b = 0;
        for (let i = 0; i < finalText.length; i++)
          b += finalText.charCodeAt(i) > 127 ? 3 : 1;
        if (b > 1500)
          alert(
            "âš ï¸ [ê²½ê³ ] ìµœì í™”ëœ ë¬¸ì¥ì˜ ìš©ëŸ‰ì´ 1500 Byteë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ê¸°ì¬ ë‚´ìš©ì„ ì¤„ì—¬ì£¼ì„¸ìš”."
          );

        const preview = document.getElementById("finalPreview");
        preview.innerHTML = "";
        const uniqueId = "opt_" + Date.now();
        const span = document.createElement("span");
        span.className = "sentence-block";
        span.id = uniqueId;
        span.innerText = finalText;
        preview.appendChild(span);

        finalHistoryStack = [
          {
            id: uniqueId,
            hashKey: "BHV_MERGED_" + Date.now(),
            logIds: allActiveLogIds,
            freq: mergedFreq,
            comp: compToUse,
            aiGeneratedText: upgradedText,
            len: finalText.length,
            status: "optimized",
            needsUpgrade: false,
            manualCount: customSentences.length,
          },
        ];

        renderInfoLayer();
        updateByte();
        showToast("AI ë‹¤ë“¬ê¸° ë° ì§ì ‘ ì‘ì„± ë¬¸ì¥ ë³‘í•©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
      }

      function clearFinal() {
        if (confirm("ì „ì²´ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          document.getElementById("finalPreview").innerText =
            "í•™ìƒì„ ì„ íƒí•˜ê³  ë¬¸ì¥ì„ ìƒì„±í•´ ì£¼ì„¸ìš”.";
          finalHistoryStack = [];
          renderInfoLayer();
          updateByte();
        }
      }

      function updateByte() {
        const text = document.getElementById("finalPreview").innerText;
        if (text.includes("í•™ìƒì„ ì„ íƒí•˜ê³ ")) {
          document.getElementById("charNum").innerText = 0;
          document.getElementById("byteNum").innerText = 0;
          document.getElementById("byteNum").style.color = "#1f4ddc";
          return;
        }

        document.getElementById("charNum").innerText = text.length;
        let bytes = 0;
        for (let i = 0; i < text.length; i++)
          bytes += text.charCodeAt(i) > 127 ? 3 : 1;
        document.getElementById("byteNum").innerText = bytes;
        document.getElementById("byteNum").style.color =
          bytes > 1500 ? "red" : "#1f4ddc";
      }

      function finalApply() {
        alert("NEIS ì…ë ¥ ì™„ë£Œ");
      }
    </script>
  </body>
</html>
